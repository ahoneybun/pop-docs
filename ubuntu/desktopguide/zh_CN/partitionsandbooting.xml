<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" 
	"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY % globalent SYSTEM "../../../libs/global.ent">
%globalent;
<!ENTITY % cdo-C SYSTEM "../../../libs/cdo-C.ent">
%cdo-C;
<!ENTITY % gnome-menus-zh_CN SYSTEM "../../../ubuntu/libs/gnome-menus-zh_CN.ent">
%gnome-menus-zh_CN;
<!ENTITY % xinclude SYSTEM "../../../libs/xinclude.mod">
%xinclude;
<!ENTITY language "en">
<!ENTITY ubuntu '<phrase>Ubuntu</phrase>'>
]>
<chapter id="partitions-booting" status="complete">
	<title>分区并重启</title>
		<para>This section contains information about how to change the way that your computer behaves when you first turn it on, and how to access other operating systems and partitions from Ubuntu.</para>
			<sect1 status="complete">
				<title>图形分区编辑器</title>
					<para><application>Gparted</application> 是一个编辑磁盘分区的图形工具。</para> 
					<procedure>
						<step>
							<para>安装 <application>gparted</application> 软件包 (参见 <xref linkend="add-applications"/>)。</para>
						</step>
						<step>	
							<para>You can run the application with &gparted;.
							</para>
						</step>
					</procedure>
		</sect1>
		<sect1 status="complete">
			<title>Make Windows partitions available from Ubuntu</title>
				<para>Windows partitions should be automatically available from any Ubuntu system. If they are not, you can make them available using the <application>Disks Manager</application>.</para>
				<procedure>
					<step>
						<para>Open &disks;.</para>
					</step>
					<step>
						<para>Select the correct hard disk, and click <guilabel>Partitions</guilabel>.</para>
					</step>
					<step>
						<para>选择相关分区并点击 <guilabel>激活</guilabel>。</para>
					</step>
					<step>
						<para>欲卸载该分区，单击<guilabel>禁用</guilabel>。</para>
					</step>
				</procedure>
		</sect1>
		<sect1 status="complete">
			<title>Make Windows partitions automatically available</title>
				<para>Windows partitions should be automatically available from Ubuntu. If they are not, the following procedure will make them automatically available:</para>
				<procedure>
					<step>
						<para>参阅 <xref linkend="listpartitiontables"/></para>
					</step>
					<step>
						<para>首先创建一个目录以便分区可以启用 ("挂载")：</para>
							<screen>
sudo mkdir /media/windows
							</screen>
					</step>
					<step>
						<para>Next, back up your disk configuration file and open the file in a text editor with administrative privileges:
						</para>
						<screen>
sudo cp /etc/fstab /etc/fstab_backup
sudo gedit /etc/fstab
						</screen>
					</step>
					<step>
						<para>在文件最后添加以下行：<programlisting>/dev/hda1 /media/windows ntfs umask=0222 0 0</programlisting></para>
						<note>
							<para>用您正确的分区名来替换 <emphasis role="bold">/dev/hda1</emphasis>。</para>
							<para>如果您的 Windows 分区使用 FAT32 文件系统，那么在上面的命令上用 <emphasis role="bold">vfat</emphasis> 替换掉 <emphasis role="bold">ntfs</emphasis>。</para>
							<para>如果你有一个 FAT32 的文件系统，对它的读写也同样是安全的。要做到这一点，需要将 <emphasis role="bold">umask</emphasis> 改为 0000.</para>
						</note>
					</step>
					<step>
						<para>Save the edited file (<ulink url="sample/fstab_automountntfs">an example</ulink>).</para>
					</step>
					<step>
						<para>所做改动将会在计算机重启后生效。</para>
					</step>
				</procedure>
		</sect1>
		<sect1 status="complete">
			<title>在启动时自动运行一个系统命令。</title>
				<para>Sometimes it can be useful to run a custom command whenever your computer starts up. To do this:</para>
				<procedure>
					<step>
						<para>以管理权限编辑 <application>crontab</application> (参见 <xref linkend="root-and-sudo"/>)：</para>
							<screen>sudo crontab -e</screen>
					</step>
					<step>
						<para>插入以下内容：</para>
							<screen>@reboot /home/user/command</screen>
					<note>
						<para>用您命令的绝对路径替换掉 <filename>/home/user/command</filename>。</para>
					</note>
					</step>
					<step>
						<para>保存该文件并退出</para>
					</step>
				</procedure>
		</sect1>
		<sect1 status="complete">
			<title>Change default operating system at boot</title>
				<para>To change which operating system starts by default when the computer starts up, edit the <application>grub</application> configuration file.</para>
				<procedure>
					<step>
						<para>Make a backup of the configuration file, and open it in a text editor:</para>
							<screen>sudo cp /boot/grub/menu.lst /boot/grub/menu.lst_backup
sudo gedit /boot/grub/menu.lst</screen>
					</step>
					<step>
						<para>查找该行：</para>
						<programlisting>...
default 0
...</programlisting>
					</step>
					<step>
						<para>用以下行替换：</para>
						<programlisting>default X</programlisting>
						<note><para>You should replace X with a number, according to the order which your operating systems appear in the configuration file. You should start counting from 0. For example, if you wish the default operating system to be the first in the list, replace X with 0, if you wish the default operating system to be the second in the list, replace X with 1, and so on.</para></note> 
					</step>
					<step>
						<para>
							Save the edited file (<ulink url="sample/menu.list_changedefaultosgrub">an example</ulink>)
						</para>
					</step>
				</procedure>
		</sect1>
		<sect1 status="complete">
			<title>Configure startup services</title>
				<para>这要求管理权限 (参见 <xref linkend="root-and-sudo"/>)。</para>
				<procedure>
					<step>
						<para>Run <application>Services Settings</application>:
							<menuchoice>
								<guimenu>System</guimenu>
								<guisubmenu>Administration</guisubmenu>
								<guimenuitem>Services</guimenuitem>
							</menuchoice>.
						</para>
					</step>
					<step>
						<para>输入您的密码。</para>
					</step>
					<step>
						<para>Select the services you want running, then click <guibutton>OK</guibutton> when done.</para>
					</step>
					<step>
						<para>For greater control over the boot-up services, install the <application>bum</application> from the <quote>Universe</quote> repository (see <xref linkend="add-applications"/>), and run it:
							<menuchoice>
								<guimenu>System</guimenu>
								<guisubmenu>Administration</guisubmenu>
								<guimenuitem>Boot-up Manager</guimenuitem>
							</menuchoice>.
						</para>
					</step>
				</procedure>
			</sect1>
	<sect1 id="other-hardware" status="complete">
	    <title>其他技巧</title>
	    <sect2 id="listpartitiontables" status="complete">
                <title>检查磁盘空间使用情况并查看分区表</title>
                    <procedure>
                        <step>
                            <para>Open &disks;.</para>
                        </step>
                        <step>
                            <para>选择 <guibutton>硬盘</guibutton>，然后是 <guibutton>分区</guibutton> 标签页</para>
                        </step>
                        <step>
                            <para>每个分区将列在 <guilabel>分区列表</guilabel> 下，并显示磁盘空间和挂载点。</para>
                        </step>
                    </procedure>
            </sect2>
            <sect2 status="complete">
                <title>列出设备</title>
                            <para>To list mounted devices, in a terminal enter:</para>
                               <screen>mount</screen>
			    <para>这个清单列出了一些设备（如一个硬盘分区），加载点（你可以访问文件的地方），文件系统类型和一些mount命令选项。</para>
                            <para>这个例子显示出hda2 硬盘分区加载点是“/”，文件系统类型是ext3。这个分区被加载时有两个选项，一个是允许以读写方式访问这个设备，另一个就是以只读方式重新加载这个设备，以防万一出错。</para>
                            <screen><computeroutput>/dev/hda2 on / type ext3 (rw,errors=remount-ro)</computeroutput></screen>				
                            <para>列出PCI设备：</para>
                                <screen>lspci</screen>
                            <para>列出USB设备：</para>
                                <screen>lsusb</screen>
            </sect2>
 
            <sect2 status="complete">
                <title>手动加载/卸载 CD/DVD-ROM，并列出所有隐藏的和相关联的文件/文件夹。</title>
                            <para>假定 <filename class="devicefile">/media/cdrom0/</filename> 是您的系统的 CD/DVD-ROM 挂载点</para>
                            <para>To mount a CD/DVD-ROM:</para>
                            <para>
                                <screen>
sudo mount /media/cdrom0/ -o unhide</screen>
                            </para>
                            <para>To unmount a CD/DVD-ROM:</para>
                            <para>
                                <screen>
sudo umount /media/cdrom0/</screen>
                            </para>
            </sect2>
	</sect1>
</chapter>

