<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" 
        "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY % globalent SYSTEM "../../../libs/global.ent">
%globalent;
<!ENTITY % cdo-C SYSTEM "../../../libs/cdo-C.ent">
%cdo-C;
<!ENTITY % pg-common SYSTEM "../pg-common.ent">
%pg-common;
<!ENTITY % xinclude SYSTEM "../../../libs/xinclude.mod">
%xinclude;
<!ENTITY language "en">
<!ENTITY ubuntu '<phrase>Ubuntu</phrase>'>
]>
<chapter id="updating-chap" status="writing">
 		<title>Mengupdate Paket</title>

			<para>Jika anda telah lama mencoba banyak distro Linuxanda pasti akan menemukan beberapa bug dalam program. Dalam distro Debian dan&ubuntu;, bug seringkali dibetulkan pada paketdengan mempatching source code.</para>

			<para>Untuk mempatch source code program, anda bisa dengan sederhana mendownload paket source &ubuntu; (dengan <application>apt-get source</application> dan membuat perubahan yang dibutuhkan. Anda juga bisa menambahkan entri baru ke <filename>debian/changelog</filename> menggunakan <application>dch -i</application> atau  <application>dch -v &lt;version&gt;-&lt;revision&gt;</application> untuk menetapkan versi baru. Bila anda menjalankan <application>debuild -S</application> dari direktori sumber anda akan memiliki paket sumber baru dengan <filename>.diff.gz</filename> dalam direktori parent yang mengandung perubahan anda. Masalah dengan pendekatan ini adalah perbedaan antara source dan patch adalah belum jelas.</para>

			<para>Solusi untuk masalah ini adalah memisahkan perubahan pada source code dalam patch-patch individual yang disimpan dalam direktori <filename>debian</filename>. Satu patch sistem yang seperti itu disebut <application>dpatch</application>. Patch-patch disimpan dalam direktori <filename>debian/patches</filename> dan memiliki format spesial.</para>

			<para>Untuk membuat <application>dpatch</application>, lakukan serangkaian langkah-langkah berikut.</para>

			<para>Buat sebuah work space temporari dan dua salinan dari direktori source yang sekarang.</para>
			
			<screen>
mkdir tmp
cd tmp
cp -a ../&lt;package&gt;-&lt;version&gt; . 
cp -a &lt;package&gt;-&lt;version&gt; &lt;package&gt;-&lt;version&gt;.orig 
</screen>

			<para>Buat perubahan dalam direktori <filename>&lt;package&gt;-&lt;version&gt;</filename></para>

			<para>Buat file patch menggunakan  <application>diff</application> dan letakkan dalam direktori <filename>debian/patches</filename></para>

			<screen>
diff -Nru  &lt;package&gt;-&lt;version&gt;.orig &lt;package&gt;-&lt;version&gt; &gt; patch-file
</screen>

			<para>Buat <application>dpatch</application> menggunakan <application>dpatch patch-template</application> dan sebuah file yang bernama <filename>00list</filename> yang melist dpatches :</para>
			<screen>
dpatch patch-template -p "01_patchname" "patch-file description" \
	&lt; patch-file &gt; 01_patchname.dpatch
echo 01_patchname.dpatch &gt;00list</screen>

			<para>Anda sekarang bisa meletakkan <filename>01_patchname.dpatch</filename> dan <filename>00list</filename> dalam direktori <filename>debian/patches</filename> dari paket source anda :</para>

			<screen>
mkdir ../&lt;package&gt;-&lt;version&gt;/debian/patches
cp 01_patchname.dpatch 00list ../&lt;package&gt;-&lt;version&gt;/debian/patches
cd ..
rm -rf tmp
			</screen>

			<note><para>Anda juga bisa mengedit sebuah pre-existing patch menggunakan <application>dpatch-edit-patch</application>.</para></note>
			
		<para>Sekali semua perubahan telah dibuat, suatu entri changelog ditambahkan, dan <application>dpatch</application> ditambahkan pada file <filename>debian/control</filename> (jika dibutuhkan), kemudian anda bisa membangun ulang paket source dengan <application>debuild -S</application>.</para>

		<para>Untuk mendapatkan paket source anda yang sudah diperbaiki diupload ke repositori &ubuntu;, anda akan butuh untuk mendapatkan paket source anda didukung oleh seseorang yang memiliki hak-hak upload. Lihat  <xref linkend="ubuntu-upload"/> untuk lebih detail. Kadang-kadang, daripada memberikan semua paket source (.diff.gz, .dsc, and .orig.tar.gz), lebih mudah dan lebih efisien untuk hanya memberikan perbedaan antara paket source yang sekarang ada pada repositori dan paket source yang sudah diperbaiki. Sebuah tool telah dibuat untuk melakukannya yang disebut <application>debdiff</application>. Menggunakan <application>debdiff</application> adalah sama dengan menggunakan <application>diff</application> tapi lebih spesifik untuk mempaketkan. Anda bisa men<application>debdiff</application> paket source dengan :</para>

		<screen>
debdiff &lt;oldpackage&gt;.dsc &lt;newpackage&gt;.dsc &gt; package.debdiff
		</screen>

		<para>atau paket biner dengan:</para>

		<screen>
debdiff &lt;oldpackage&gt;.deb &lt;newpackage&gt;.deb &gt; package.debdiff
		</screen>
	
		<para>Debdiffs sangat baik untuk melampirkan laporan-laporan bug dan telah siap bagi sponsor untuk mengupload.</para>
		
</chapter>

