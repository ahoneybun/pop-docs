<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
	"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY % globalent SYSTEM "../../../libs/global.ent">
%globalent;
<!ENTITY % cdo-C SYSTEM "../../../libs/cdo-C.ent">
%cdo-C;
<!ENTITY % gnome-menus-C SYSTEM "../../../ubuntu/libs/gnome-menus-C.ent">
%gnome-menus-C;
<!ENTITY % xinclude SYSTEM "../../../libs/xinclude.mod">
%xinclude;
<!ENTITY language "en">
]>
<appendix id="appendix-chap" status="writing">
	<title>Appendix</title>


	<para><emphasis role="bold">Additional Resources</emphasis></para>
	<para>
            <itemizedlist>

                <listitem><para><ulink
                    url="http://www.debian.org/doc/manuals/maint-guide/">
                    Debian New Maintainers Guide</ulink></para>
                </listitem>

                <listitem><para><ulink
                    url="http://www.debian.org/doc/debian-policy/">
                    Debian Policy</ulink></para>
                </listitem>

                <listitem><para><ulink
                    url="http://www.debian.org/doc/manuals/developers-reference/">
                    Debian Developer's Reference</ulink></para>
                </listitem>
		
		<listitem><para><ulink url="https://wiki.ubuntu.com/MOTU/Documentation">
			Ubuntu MOTU Documentation</ulink></para>
		</listitem>
		
		<listitem><para><ulink url="https://wiki.ubuntu.com/KubuntuPackagingGuide">
			Kubuntu Packaging Guide</ulink></para>
		</listitem>

            </itemizedlist>
		</para>


	<para>Topics such as Additional Resources and a debian/* reference.</para>


	<sect1>
		<title>Chroot Environment</title>

		<para> A chroot environment is commonly used for development related work and is
			basically like a virtual install of build related software. It is always a
			good idea to do development work in a chroot environment as development work
			often requires the installation of development packages (whose main purpose is
			for building packages). An example of this is when a certain application
			requires the development version of a library to build (e.g.
			<application>libabc-dev</application>). A normal user would not require the
			development version of <application>libabc</application>. Thus it is better to
			install such development packages in a chroot so as to leave the normal
			operating environment clean and uncluttered. First, install the required
			packages:</para>
		
		<screen>sudo apt-get install dchroot deboostrap</screen>
		
		<para>The next steps are to create and configure the and enter the chroot
			environment.</para>
		
		<screen>
sudo mkdir /var/chroot
echo "mychroot /var/chroot" | sudo tee -a /etc/dchroot.conf
sudo debootstrap --variant=buildd dapper /var/chroot/ http://archive.ubuntu.com/ubuntu/
sudo cp /etc/resolv.conf /var/chroot/etc/resolv.conf
sudo cp /etc/apt/sources.list /var/chroot/etc/apt/
sudo chroot /var/chroot/</screen>

		<para>In order to be able to use apt in the chroot, add Ubuntu sources to chroot
			apt sources. For the moment ignore any warnings about package
			authentication:</para>
		
		<screen>
echo "deb     http://archive.ubuntu.com/ubuntu dapper main restricted \
	universe multiverse" > /etc/apt/sources.list
echo "deb-src http://archive.ubuntu.com/ubuntu dapper main restricted \
	universe multiverse" >> /etc/apt/sources.list
apt-get update
apt-get install build-essential dh-make automake pbuilder gnupg lintian
wget debconf devscripts gnupg sudo
apt-get update
exit</screen>

		<para>Run the following to configure locales:</para>
		
		<screen>
sudo chroot /var/chroot/
apt-get install locales dialog
dpkg-reconfigure locales
exit</screen>

		<para>Next, fix the user and root password for the chroot environment. The last
			line below is to avoid sudo warnings when resolving in the chroot
			environment:</para>
		
		<screen>
sudo cp /etc/passwd /var/chroot/etc/
sudo sed 's/\([^:]*\):[^:]*:/\1:*:/' /etc/shadow | sudo tee /var/chroot/etc/shadow
sudo cp /etc/group /var/chroot/etc/
sudo cp /etc/hosts /var/chroot/etc/</screen>

		<para>To enable sudo, setup your root password and the first sudo user in the
			admin group (for the chroot environment). In the following commands,
			substitute "&lt;user&gt;" with the username that will be used in the chroot
			environment:</para>
		
		<screen>
sudo cp /etc/sudoers /var/chroot/etc/
sudo chroot /var/chroot/
dpkg-reconfigure passwd
passwd &lt;user&gt;
exit</screen>

		<para>The system fstab needs to be modified so that the chroot environment will
			have access to the system home directories, temp directory, etc. Note that the
			actual system home directory is used in the chroot environment.</para>
		
		<screen>sudo editor /etc/fstab</screen>
		
		<para>Add these lines:</para>
		<screen>
/home           /var/chroot/home        none    bind            0       0
/tmp            /var/chroot/tmp         none    bind            0       0
proc-chroot     /var/chroot/proc        proc    defaults        0       0
devpts-chroot   /var/chroot/dev/pts     devpts  defaults        0       0</screen>

		<para>Mount the new fstab entries</para>
		
		<screen>sudo mount -a</screen>
		
		<para>The default bash profile includes chroot information in the prompt. To make
			this visible:</para>
		
		<screen>
sudo chroot /var/chroot/
echo mychroot > /etc/debian_chroot
exit</screen>

		<para>Now when you want to use your chroot (you may omit the -c mychroot if
			there's only one, or you just want the first one in
			<filename>/etc/dchroot.conf</filename>). The -d parameter means that your
			environment will be preserved, this is generally useful if you want chrooted
			applications to seamlessly use your X server, your session manager,
			etc.</para>
		
		<screen>dchroot -c mychroot -d</screen>
	
</sect1>
	
</appendix>
