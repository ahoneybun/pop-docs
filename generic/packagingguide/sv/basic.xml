<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY % globalent SYSTEM "../../../libs/global.ent">
<!-- NAMES --><!ENTITY canonical-name "Canonical Ltd.">
<!ENTITY project-name "Ubuntu Documentation Project">
<!ENTITY ubuntu "<phrase>Ubuntu</phrase>">
<!-- VERSIONS --><!ENTITY distro-version "Dapper Drake">
<!ENTITY distro-rev "6.06">
<!ENTITY distro-release-date "June 2006">
<!ENTITY linux-kernel-version "2.6.15">
<!ENTITY gcc-version "4.0.3">
<!ENTITY glibc-version "2.3.6">
<!ENTITY python-version "2.4.3">
<!-- AUTHORS --><!ENTITY author-ubuntu-documentation-project SYSTEM "../common/authors/ubuntu-documentation-project.xml">
<!ENTITY author-christoph-haas SYSTEM "../common/authors/christoph-haas.xml">
<!ENTITY author-alexander-poslavsky SYSTEM "../common/authors/alexander-poslavsky.xml">
<!ENTITY author-alan-hood SYSTEM "../common/authors/alan-hood.xml">
<!ENTITY author-johnathon-hornbeck SYSTEM "../common/authors/johnathon-hornbeck.xml">
<!ENTITY author-nick-loeve SYSTEM "../common/authors/nick-loeve.xml">
<!ENTITY author-gordon-ingram SYSTEM "../common/authors/gordon-ingram.xml">
<!ENTITY author-sean-wheller SYSTEM "../common/authors/sean-wheller.xml">
<!ENTITY author-enrico-zini SYSTEM "../common/authors/enrico-zini.xml">
<!ENTITY author-kevin-muligan SYSTEM "../common/authors/kevin-muligan.xml">
<!ENTITY author-ari-torhamo SYSTEM "../common/authors/ari-torhamo.xml">
<!ENTITY author-jeff-schering SYSTEM "../common/authors/jeff-schering.xml">
<!ENTITY author-corey-burger SYSTEM "../common/authors/corey-burger.xml">
<!ENTITY author-niel-tallim SYSTEM "../common/authors/niel-tallim.xml">
<!ENTITY author-henry-meyerding SYSTEM "../common/authors/henry-meyerding.xml">
<!ENTITY author-matthew-east SYSTEM "../common/authors/matthew-east.xml">
<!ENTITY author-jerome-gotangco SYSTEM "../common/authors/jerome-gotangco.xml">
<!ENTITY author-johnathan-jesse SYSTEM "../common/authors/johnathan-jesse.xml">
<!ENTITY author-greg-taylor SYSTEM "../common/authors/greg-taylor.xml">
<!ENTITY author-troy-williams SYSTEM "../common/authors/troy-williams.xml">
<!ENTITY author-matt-galvin SYSTEM "../common/authors/matt-galvin.xml">
<!ENTITY author-robert-stoffers SYSTEM "../common/authors/robert-stoffers.xml">
<!ENTITY author-jordan-mantha SYSTEM "../common/authors/jordan-mantha.xml">
<!ENTITY author-venkat-raghavan SYSTEM "../common/authors/venkat-raghavan.xml">
<!ENTITY author-brian-burger SYSTEM "../common/authors/brian-burger.xml">
<!ENTITY author-rocco-stanzione SYSTEM "../common/authors/rocco-stanzione.xml">
<!ENTITY glossary SYSTEM "../common/C/glossary.xml">
<!-- LEGAL URLs --><!ENTITY gpl-url '<ulink url="http://www.gnu.org/licenses/gpl.html">GNU General Public License</ulink>'>
<!ENTITY cc "http://creativecommons.org/">
<!ENTITY cc-attrib '<ulink url="http://creativecommons.org/licenses/by-sa/2.0/">Attribution-ShareAlike 2.0</ulink>'>
<!ENTITY cc-fulldeed-url "http://creativecommons.org/licenses/by-sa/2.0/legalcode/">
<!ENTITY fdl-url '<ulink url="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</ulink>'>
<!ENTITY cc-disclaimer-url "http://creativecommons.org/licenses/disclaimer-popup?lang=en">
<!-- CANONICAL URL RESOURCES --><!ENTITY canonical-url "http://www.canonical.com">
<!-- UBUNTU URL RESOURCES --><!ENTITY ubuntu-packages "http://packages.ubuntu.com">
<!ENTITY ubuntu-dpkgfile "ubuntu5.10.tar">
<!ENTITY ubuntu-web "http://www.ubuntu.com">
<!ENTITY ubuntu-main "http://www.ubuntu.com">
<!ENTITY ubuntu-download "http://www.ubuntu.com/download">
<!ENTITY ubuntu-forums "http://www.ubuntu.com/community/forums">
<!ENTITY ubuntu-components "http://www.ubuntu.com/ubuntu/components">
<!ENTITY ubuntu-lists "http://lists.ubuntu.com">
<!ENTITY ubuntu-wiki "http://wiki.ubuntu.com">
<!ENTITY ubuntu-irc "irc.freenode.net channel #ubuntu">
<!ENTITY ubuntu-bugzilla "https://launchpad.net/distros/ubuntu/+bugs">
<!ENTITY ubuntu-doc-bugs "https://launchpad.net/products/ubuntu-doc/+bugs">
<!ENTITY ubuntu-paidsupport "http://www.ubuntu.com/support/supportoptions/paidsupport">
<!ENTITY ubuntu-freesupport "http://www.ubuntu.com/support/supportoptions/freesupport">
<!ENTITY ubuntu-comments "http://www.ubuntuforums.org/showthread.php?p=21787">
<!ENTITY ubuntu-documentation "http://help.ubuntu.com">
<!ENTITY ubuntu-documentation-repos "https://docteam.ubuntu.com/repos/trunk">
<!ENTITY ubuntu-doc-team "https://wiki.ubuntu.com/DocumentationTeam">
<!ENTITY ubuntu-doc-list "http://lists.ubuntu.com/mailman/listinfo/ubuntu-doc">
<!ENTITY ubuntu-shipit "http://shipit.ubuntu.com">
<!ENTITY ubuntu-launchpad "https://launchpad.ubuntu.com">
<!ENTITY ubuntu-rosetta "https://launchpad.ubuntu.com/rosetta">
<!ENTITY ubuntu-planet "http://planet.ubuntu.com">
<!ENTITY ubuntu-philosophy "http://www.ubuntu.com/ubuntu/philosophy">
<!ENTITY ubuntu-participate "http://www.ubuntu.com/community/participate/">
<!-- UBUNTU WIKI RESOURCES --><!ENTITY wiki-UserDocumentation "https://wiki.ubuntu.com/UserDocumentation">
<!ENTITY restricted-formats "https://wiki.ubuntu.com/RestrictedFormats">
<!ENTITY wiki-RestrictedFormats "https://wiki.ubuntu.com/RestrictedFormats">
<!ENTITY wiki-XChatHowto "https://wiki.ubuntu.com/XChatHowto">
<!ENTITY wiki-RootSudo "https://wiki.ubuntu.com/RootSudo">
<!ENTITY wiki-HowToGetHelp "https://wiki.ubuntu.com/HowToGetHelp">
<!ENTITY transcode "https://wiki.ubuntu.com/DVDRippingandEncoding">
<!ENTITY wiki-Wine "https://wiki.ubuntu.com/Wine">
<!ENTITY wiki-Cedega "https://wiki.ubuntu.com/Cedega">
<!ENTITY wiki-Nano "https://wiki.ubuntu.com/NanoHowto">
<!ENTITY wiki-locoteams "https://wiki.ubuntu.com/LoCoTeamList">
<!ENTITY wiki-BasicCommands "https://wiki.ubuntu.com/BasicCommands">
<!ENTITY wiki-filepermissions "https://wiki.ubuntu.com/FilePermissions">
<!-- KUBUNTU URL RESOURCES --><!ENTITY kubuntu-web "http://www.kubuntu.org">
<!ENTITY kubuntu-main "http://www.kubuntu.org">
<!ENTITY kubuntu-download "http://releases.ubuntu.com/kubuntu/">
<!ENTITY kubuntu-packages "http://packages.ubuntu.com/breezy/">
<!ENTITY kubuntu-cdpackages-nodefault "http://people.ubuntu.com/~cjwatson/seeds/kubuntu-breezy/ship">
<!ENTITY kubuntu-lists "http://lists.ubuntu.com/archives/kubuntu-users/">
<!ENTITY kubuntu-lists-users "http://lists.ubuntu.com/mailman/listinfo/kubuntu-users/">
<!ENTITY kubuntu-lists-devel "http://lists.ubuntu.com/mailman/listinfo/kubuntu-devel/">
<!ENTITY kubuntu-mirrors "http://distrowatch.com/kubuntu">
<!ENTITY kubuntu-forums "http://ubuntuforums.org/forumdisplay.php?f=68">
<!ENTITY kubuntu-forums2 "http://kubuntuforums.net">
<!ENTITY kubuntu-wiki "http://www.ubuntu.com/wiki/Kubuntu">
<!ENTITY kubuntu-irc "irc.freenode.net channel kubuntu">
<!ENTITY kubuntu-documentation-site "http://www.kubuntu.org/documentation.php">
<!ENTITY kubuntu-wiki-UserDocumentation "https://wiki.kubuntu.com/UserDocumentation">
<!-- XUBUNTU URL RESOURCES --><!ENTITY xubuntu-irc "irc.freenode.net channel xubuntu">
<!-- DEBIAN RESOURCES --><!ENTITY debian-apt "http://www.debian.org/doc/user-manuals#apt-howto">
<!-- EXTERNAL URL RESOURCES --><!ENTITY linmodem "http://www.linmodems.org/">
<!ENTITY gnome "http://www.gnome.org/">
<!ENTITY linuxorg "http://www.linux.org/">
<!ENTITY ooo "http://www.openoffice.org/">
<!ENTITY kde "http://www.kde.org/">
<!ENTITY lugww "http://lugww.counter.li.org/">
<!ENTITY ubuntu-watch "http://distrowatch.com/ubuntu/">
<!ENTITY realplayer-download "http://www.real.com/linux/">
<!ENTITY nvu-download "http://www.nvu.com/download.html">
<!ENTITY sunjava-download "http://java.sun.com/j2se/1.5.0/download.jsp">
<!ENTITY xorg "http://www.x.org">
<!ENTITY dyndns "http://www.dyndns.org">
<!ENTITY shoutcast "http://www.shoutcast.com/">
<!ENTITY freedomtoaster "http://www.freedomtoaster.org/">
<!-- ubuntu-screenshots TODO --><!ENTITY kubuntu-screenshots "http://shots.osdir.com/slideshows/slideshow.php?release=306&amp;slide=1">
<!ENTITY mozilla "http://www.mozilla.org/">
<!ENTITY mozilla-firefox "http://www.mozilla.org/products/firefox/">
<!ENTITY gnu "http://www.gnu.org/">
<!ENTITY gnu-philosophy "http://www.gnu.org/philosophy/">
<!ENTITY win4lin "http://www.win4lin.com">
<!ENTITY codeweavers "http://www.codeweavers.com">
<!ENTITY kernel "http://www.kernel.org">
<!ENTITY google "http://www.google.com">
<!ENTITY kdelook " http://www.kde-look.org">
<!-- this entity controls the url for addons--><!ENTITY java-download "http://java.sun.com/j2se/1.5.0/download.jsp">
<!ENTITY skype-deb "skype_1.2.0.17-1_i386.deb">
<!ENTITY skype-download "http://www.skype.com/go/getskype-linux-deb">
<!ENTITY scanmodem-gz "scanModem.gz">
<!ENTITY scanmodem-url "http://linmodems.technion.ac.il/packages/scanModem.gz">
<!ENTITY ext2fs-url "http://www.fs-driver.org/index.html">
<!ENTITY mvb-tar "mvb_1.6.tgz">
<!ENTITY mvb-url "http://www.xscd.com/pub/mvb/&mvb-tar;">
<!-- TLDP --><!ENTITY ldp-pre-install-check "http://tldp.org/HOWTO/Pre-Installation-Checklist/">
<!-- LANGUAGES (sorted by two letter code)--><!ENTITY Afar "aa">
<!ENTITY Abkhazian "ab">
<!ENTITY Afrikaans "af">
<!ENTITY Amharic "af">
<!ENTITY Arabic "ar">
<!ENTITY Assamese "as">
<!ENTITY Aymara "ay">
<!ENTITY Azerbaijani "az">
<!ENTITY Bashkir "ba">
<!ENTITY Byelorussian "be">
<!ENTITY Bulgarian "bg">
<!ENTITY Bihari "bh">
<!ENTITY Bislama "bi">
<!ENTITY Bangla "bn">
<!ENTITY Bengali "bn">
<!ENTITY Tibetan "bo">
<!ENTITY Breton "br">
<!ENTITY Catalan "ca">
<!ENTITY Corsican "co">
<!ENTITY Czech "cs">
<!ENTITY Welsh "cy">
<!ENTITY Danish "da">
<!ENTITY German "de">
<!ENTITY Bhutani "dz">
<!ENTITY Greek "el">
<!-- <!ENTITY EnglishAmerican 'en'> --><!ENTITY EnglishAmerican "C">
<!ENTITY Esperanto "eo">
<!ENTITY Spanish "es">
<!ENTITY Estonian "et">
<!ENTITY Basque "eu">
<!ENTITY Persian "fa">
<!ENTITY Finnish "fi">
<!ENTITY Fiji "fj">
<!ENTITY Faeroese "fo">
<!ENTITY French "fr">
<!ENTITY Frisian "fy">
<!ENTITY Irish "ga">
<!ENTITY Gaelic "gd">
<!ENTITY ScotsGaelic "gd">
<!ENTITY Galician "gl">
<!ENTITY Guarani "gn">
<!ENTITY Gujarati "gu">
<!ENTITY Hausa "ha">
<!ENTITY Hindi "hi">
<!ENTITY Croatian "hr">
<!ENTITY Hungarian "hu">
<!ENTITY Armenian "hy">
<!ENTITY Interlingua "ia">
<!ENTITY Interlingue "ie">
<!ENTITY Inupiak "ik">
<!ENTITY Indonesian "in">
<!ENTITY Icelandic "is">
<!ENTITY Italian "it">
<!ENTITY Hebrew "iw">
<!ENTITY Japanese "ja">
<!ENTITY Yiddish "ji">
<!ENTITY Javanese "jw">
<!ENTITY Georgian "ka">
<!ENTITY Kazakh "kk">
<!ENTITY Greenlandic "kl">
<!ENTITY Cambodian "km">
<!ENTITY Kannada "kn">
<!ENTITY Korean "ko">
<!ENTITY Kashmiri "ks">
<!ENTITY Kurdish "ku">
<!ENTITY Kirghiz "ky">
<!ENTITY Latin "la">
<!ENTITY Lingala "ln">
<!ENTITY Laothian "lo">
<!ENTITY Lithuanian "lt">
<!ENTITY Latvian "lv">
<!ENTITY Lettish "lv">
<!ENTITY Malagasy "mg">
<!ENTITY Maori "mi">
<!ENTITY Macedonian "mk">
<!ENTITY Malayalam "ml">
<!ENTITY Mongolian "mn">
<!ENTITY Moldavian "mo">
<!ENTITY Marathi "mr">
<!ENTITY Malay "ms">
<!ENTITY Maltese "mt">
<!ENTITY Burmese "my">
<!ENTITY Nauru "na">
<!ENTITY Nepali "ne">
<!ENTITY Dutch "nl">
<!ENTITY Norwegian "no">
<!ENTITY Occitan "oc">
<!ENTITY Afan "om">
<!ENTITY Oromo "om">
<!ENTITY Oriya "or">
<!ENTITY Punjabi "pa">
<!ENTITY Polish "pl">
<!ENTITY Pushto "ps">
<!ENTITY Pashto "ps">
<!ENTITY Portuguese "pt">
<!ENTITY Quechua "qu">
<!ENTITY Rhaeto-Romance "rm">
<!ENTITY Kirundi "rn">
<!ENTITY Romanian "ro">
<!ENTITY Russian "ru">
<!ENTITY Kinyarwanda "rw">
<!ENTITY Sanskrit "sa">
<!ENTITY Sindhi "sd">
<!ENTITY Sangro "sg">
<!ENTITY Serbo-Croatian "sh">
<!ENTITY Singhalese "si">
<!ENTITY Slovak "sk">
<!ENTITY Slovenian "sl">
<!ENTITY Samoan "sm">
<!ENTITY Shona "sn">
<!ENTITY Somali "so">
<!ENTITY Albanian "sq">
<!ENTITY Serbian "sr">
<!ENTITY Siswati "ss">
<!ENTITY Sesotho "st">
<!ENTITY Sudanese "su">
<!ENTITY Swedish "sv">
<!ENTITY Swahili "sw">
<!ENTITY Tamil "ta">
<!ENTITY Tegulu "te">
<!ENTITY Tajik "tg">
<!ENTITY Thai "th">
<!ENTITY Tigrinya "ti">
<!ENTITY Turkmen "tk">
<!ENTITY Tagalog "tl">
<!ENTITY Setswana "tn">
<!ENTITY Tonga "to">
<!ENTITY Turkish "tr">
<!ENTITY Tsonga "ts">
<!ENTITY Tatar "tt">
<!ENTITY Twi "tw">
<!ENTITY Ukrainian "uk">
<!ENTITY Urdu "ur">
<!ENTITY Uzbek "uz">
<!ENTITY Vietnamese "vi">
<!ENTITY Volapuk "vo">
<!ENTITY Wolof "wo">
<!ENTITY Xhosa "xh">
<!ENTITY Yoruba "yo">
<!ENTITY Chinese "zh">
<!ENTITY Zulu "zu">
<!ENTITY % cdo-C SYSTEM "../../../libs/cdo-C.ent">
<!-- COMMON DOC OBJECTS --><!ENTITY copyright SYSTEM "../common/C/copyright.xml">
<!ENTITY conventions SYSTEM "../common/C/conventions.xml">
<!ENTITY feedback SYSTEM "../common/C/feedback.xml">
<!ENTITY publisher SYSTEM "../common/C/publisher.xml">
<!ENTITY legalnotice SYSTEM "../common/C/legalnotice.xml">
<!ENTITY disclaimer SYSTEM "../common/C/disclaimer.xml">
<!ENTITY inline-ubuntu-icon SYSTEM "../common/C/inlinemediaobject-ubuntu-icon.xml">
<!ENTITY inline-ubuntu-icon-header SYSTEM "../common/C/inlinemediaobject-ubuntu-icon-header.xml">
<!ENTITY relative-ubuntu-icon SYSTEM "../common/C/mediaobject-relative-ubuntu-icon.xml">
<!ENTITY ubuntu-icon SYSTEM "../common/C/mediaobject-ubuntu-icon.xml">
<!ENTITY gpl SYSTEM "../common/C/gpl.xml">
<!ENTITY fdl SYSTEM "../common/C/fdl.xml">
<!ENTITY cc-by-sa SYSTEM "../common/C/ccbysa.xml">
<!ENTITY % gnome-menus-C SYSTEM "../../../ubuntu/libs/gnome-menus-C.ent">
<!-- MENUS --><!-- Please keep entries alphabetical, it makes them much easier to find & use --><!ENTITY about-me SYSTEM "../menus/C/about-me.xml">
<!ENTITY accessories SYSTEM "../menus/C/accessories.xml">
<!ENTITY acro-read SYSTEM "../menus/C/acro-read.xml">
<!ENTITY administration SYSTEM "../menus/C/administration.xml">
<!ENTITY amule SYSTEM "../menus/C/amule.xml">
<!ENTITY archive-man SYSTEM "../menus/C/archive-man.xml">
<!ENTITY assistive-technology-preferences SYSTEM "../menus/C/assistive-technology-preferences.xml">
<!ENTITY azureus SYSTEM "../menus/C/azureus.xml">
<!ENTITY blender3d SYSTEM "../menus/C/blender3d.xml">
<!ENTITY boot SYSTEM "../menus/C/boot.xml">
<!ENTITY calculator SYSTEM "../menus/C/calculator.xml">
<!ENTITY character-map SYSTEM "../menus/C/character-map.xml">
<!ENTITY desktop-background SYSTEM "../menus/C/desktop-background.xml">
<!ENTITY desktop-preferences SYSTEM "../menus/C/desktop-preferences.xml">
<!ENTITY device-manager SYSTEM "../menus/C/device-manager.xml">
<!ENTITY dictionary SYSTEM "../menus/C/dictionary.xml">
<!ENTITY disks SYSTEM "../menus/C/disks.xml">
<!ENTITY downloader-x SYSTEM "../menus/C/downloader-x.xml">
<!ENTITY file-management SYSTEM "../menus/C/file-management.xml">
<!ENTITY firefox SYSTEM "../menus/C/firefox.xml">
<!ENTITY firestarter-firewall-tool SYSTEM "../menus/C/firestarter-firewall-tool.xml">
<!ENTITY font SYSTEM "../menus/C/font.xml">
<!ENTITY gaim SYSTEM "../menus/C/gaim.xml">
<!ENTITY games SYSTEM "../menus/C/games.xml">
<!ENTITY gftp SYSTEM "../menus/C/gftp.xml">
<!ENTITY gimp SYSTEM "../menus/C/gimp.xml">
<!ENTITY gnome-app-install SYSTEM "../menus/C/gnomeappinstall.xml">
<!ENTITY gnome-config-editor SYSTEM "../menus/C/gnome-config-editor.xml">
<!ENTITY gparted SYSTEM "../menus/C/gparted.xml">
<!ENTITY graphics SYSTEM "../menus/C/graphics.xml">
<!ENTITY gthumb SYSTEM "../menus/C/gthumb.xml">
<!ENTITY home-folder SYSTEM "../menus/C/home-folder.xml">
<!ENTITY inkscape SYSTEM "../menus/C/inkscape.xml">
<!ENTITY internet SYSTEM "../menus/C/internet.xml">
<!ENTITY keyboard SYSTEM "../menus/C/keyboard.xml">
<!ENTITY keyboard-shortcuts SYSTEM "../menus/C/keyboard-shortcuts.xml">
<!ENTITY limewire SYSTEM "../menus/C/limewire.xml">
<!ENTITY login-screen-setup SYSTEM "../menus/C/login-screen-setup.xml">
<!ENTITY logout SYSTEM "../menus/C/logout.xml">
<!ENTITY menu-editor SYSTEM "../menus/C/menu-editor.xml">
<!ENTITY menus-and-toolbars SYSTEM "../menus/C/menus-and-toolbars.xml">
<!ENTITY mouse SYSTEM "../menus/C/mouse.xml">
<!ENTITY multimedia-systems-selector SYSTEM "../menus/C/multimedia-systems-selector.xml">
<!ENTITY network-proxy SYSTEM "../menus/C/network-proxy.xml">
<!ENTITY networking SYSTEM "../menus/C/networking.xml">
<!ENTITY nvu SYSTEM "../menus/C/nvu.xml">
<!ENTITY open-office SYSTEM "../menus/C/open-office.xml">
<!ENTITY palmos-devices SYSTEM "../menus/C/palmos-devices.xml">
<!ENTITY preferred-applications SYSTEM "../menus/C/preferred-applications.xml">
<!ENTITY printing SYSTEM "../menus/C/printing.xml">
<!ENTITY qtparted SYSTEM "../menus/C/qtparted.xml">
<!ENTITY remote-desktop SYSTEM "../menus/C/remote-desktop.xml">
<!ENTITY removable-drives-and-media SYSTEM "../menus/C/removable-drives-and-media.xml">
<!ENTITY realplayer SYSTEM "../menus/C/realplayer.xml">
<!ENTITY rhythmbox SYSTEM "../menus/C/rhythmbox.xml">
<!ENTITY route-planner SYSTEM "../menus/C/route-planner.xml">
<!ENTITY screen-resolution SYSTEM "../menus/C/screen-resolution.xml">
<!ENTITY screensaver SYSTEM "../menus/C/screensaver.xml">
<!ENTITY scribus SYSTEM "../menus/C/scribus.xml">
<!ENTITY services SYSTEM "../menus/C/services.xml">
<!ENTITY sessions SYSTEM "../menus/C/sessions.xml">
<!ENTITY shared-folders SYSTEM "../menus/C/shared-folders.xml">
<!ENTITY skype SYSTEM "../menus/C/skype.xml">
<!ENTITY software-properties SYSTEM "../menus/C/software-properties.xml">
<!ENTITY sound SYSTEM "../menus/C/sound.xml">
<!ENTITY soundandvideo SYSTEM "../menus/C/soundandvideo.xml">
<!ENTITY synaptic SYSTEM "../menus/C/synaptic.xml">
<!ENTITY systemtools SYSTEM "../menus/C/systemtools.xml">
<!ENTITY terminal SYSTEM "../menus/C/terminal.xml">
<!ENTITY text-editor SYSTEM "../menus/C/text-editor.xml">
<!ENTITY theme SYSTEM "../menus/C/theme.xml">
<!ENTITY time-date SYSTEM "../menus/C/time-date.xml">
<!ENTITY totem SYSTEM "../menus/C/totem.xml">
<!ENTITY ubuntu-update-manager SYSTEM "../menus/C/ubuntu-update-manager.xml">
<!ENTITY users SYSTEM "../menus/C/users.xml">
<!ENTITY users-groups SYSTEM "../menus/C/users-groups.xml">
<!ENTITY windows SYSTEM "../menus/C/windows.xml">
<!ENTITY xchat-gnome SYSTEM "../menus/C/xchat-gnome.xml">
<!ENTITY xine SYSTEM "../menus/C/xine.xml">
<!ENTITY xmms SYSTEM "../menus/C/xmms.xml">
<!ENTITY % xinclude SYSTEM "../../../libs/xinclude.mod">
<!ELEMENT xi:include (xi:fallback)?>
<!ATTLIST xi:include xmlns:xi CDATA #FIXED "http://www.w3.org/2001/XInclude">
<!ATTLIST xi:include href CDATA #REQUIRED>
<!ATTLIST xi:include parse (xml | text) "xml">
<!ATTLIST xi:include xpointer CDATA #IMPLIED>
<!ATTLIST xi:include encoding CDATA #IMPLIED>
<!ATTLIST xi:include accept CDATA #IMPLIED>
<!ATTLIST xi:include accept-charset CDATA #IMPLIED>
<!ATTLIST xi:include accept-language CDATA #IMPLIED>
<!ELEMENT xi:fallback ANY>
<!ATTLIST xi:fallback xmlns:xi CDATA #FIXED "http://www.w3.org/2001/XInclude">
<!ENTITY % local.preface.class "| xi:include">
<!ENTITY % local.part.class "| xi:include">
<!ENTITY % local.chapter.class "| xi:include">
<!ENTITY % local.divcomponent.mix "| xi:include">
<!ENTITY % local.para.char.mix "| xi:include">
<!ENTITY % local.info.class "| xi:include">
<!ENTITY % local.common.attrib "xmlns:xi            CDATA       #FIXED       'http://www.w3.org/2001/XInclude'">
<!ENTITY language "en">
]>
<chapter id="basic-chap" status="complete">
	<title>Grundläggade paketering</title>

	<para>Två av problemen som nya paketerare möter är att det finns flera sätt att paketera, och att det finns mer än ett verktyg för att göra jobbet. Vi kommer gå igenom tre exempel med de vanliga byggsystemen. Först använder vi ingen bygghjälpare alls. Den här metoden är oftast den svåraste och används sällan i praktiken, men ger den tydligaste synen på paketeringsprocessen. När vi är klara mededt kommer vi att använda <application>debhelper</application>, det vanligaste byggsystemet i Debian. Det hjälper paketeraren genom att automatisera uppgifter som ofta upprepas. Till slut kommer vi även kort titta på <emphasis role="bold">C</emphasis>ommon <emphasis role="bold">D</emphasis>ebian <emphasis role="bold">B</emphasis>uild <emphasis role="bold">S</emphasis>ystem (<application>CDBS</application>), ett mer strömlinjeformat byggsystem som använder <application>debhelper</application>.</para>

	<tip><para>Paketutveckling kräver ofta att man installerar många paket (speciellt <application>-dev</application>-paket som innehåller header-filer och andra vanliga utvecklingsfiler) som inte är en del av en vanlig <phrase>Ubuntu</phrase>-installation. Om du vill undvika att installera extra paket, eller om du vill utveckla för en annan <phrase>Ubuntu</phrase>-utgåva (utvecklingsutgåvan, till exempel) jämfört med den du nu har så rekomenderas en chroot-miljö varmt. En guide i hur du sätter upp en <xref linkend="appendix-chroot"/>går att hitta i Appendix-delen.</para></tip>

	
	<sect1 id="basic-scratch" status="complete">
		<title>Paketera från scratch</title>
		
		<important><para><emphasis role="bold">Krav:</emphasis> build-essential, automake, gnupg, lintian, fakeroot och <xref linkend="gs-pbuilder"/>.</para>
		</important>
					
		<para>I det här exemplet kommer vi att använda programmet GNU <application><ulink url="http://www.gnu.org/software/hello/hello.html">hello</ulink></application> som ett exempel. Du kan ladda ner källkodstarbollen från <ulink url="http://ftp.gnu.org/gnu/hello/hello-2.1.1.tar.gz">ftp.gnu.org</ulink>. I det här exemplet kommer vi använda katalogen <filename>~/hello/</filename>.</para>
		<screen>
mkdir ~/hello
cd ~/hello
wget http://ftp.gnu.org/gnu/hello/hello-2.1.1.tar.gz</screen>

		<para>Vi kommer också att jämföra vårt paket med det som redan finns paketerat i <phrase>Ubuntus</phrase> förråd.  I nuläget kommer vi bara att läga det i katalogen <filename>ubuntu</filename> så att vi kan titta på det senare. För att få källpaketet, se till att du har en "deb-src"-rad i din <filename>/etc/apt/sources.list</filename> för förrådet Main. Kör sedan:</para>

		<screen>
mkdir ubuntu
cd ubuntu
apt-get source hello
cd ..</screen>
		
		<note><para>Till skillnad från de flesta kommandon i <application>apt-get</application> behöver du inte root-rättigheter för att ladda ner källpaketet, eftersom det laddas ner till den aktuella katalogen. Det är till och med rekomenderat att du <emphasis>enbart</emphasis> använder <application>apt-get source</application> som en vanlig användare, eftersom du då kan ändra på filerna i källpaketet utan att behöva root-privilegier.</para></note>
		
		<para>Vad kommandot <application>apt-get source</application> gör är:</para>
		
		<orderedlist>

			<listitem><para>Ladda ner källpaketet. Ett källpaket innehåller vanligen en .dsc-fil som beskriver paketet och ger md5summor för källpakete, en .orig.tar.gz-fil som innehåller källkoden från skaparen/skaparna, och en .diff.gz-fil som innehåller alla patchar som applicerats på källkoden med paketinformation.</para></listitem>

			<listitem><para>Untar:a .orig.tar.gz-filen i den aktuella katalogen.</para></listitem>

			<listitem><para>Applicera den gunzippade .diff.gz-filen till den uppackade källkodskatalogen.</para></listitem>

			</orderedlist>

		<para>Om du laddade ner källkpaketen manuellt (filerna .dsc, .orig.tar.gz och .diff.gz) kan du packa upp dem på samma sätt som <application>apt-get source</application> gör genom att använda <application>dpkg-source</application> så här:</para>
		<para><screen>dpkg-source -x *.dsc</screen></para>

		<para>Det första du behöver göra är att göra en kopia av original-tarbollen (ibland kallad "uppström") i följande format: <filename>&lt;packagename&gt;_&lt;version&gt;.orig.tar.gz</filename>. Det här steget gör två saker. För det första skapar det två kopior av källkoden. Om du råkar ändra eller ta bort en arbetskopia kan du använda den du laddade ner. För det andra anses det vara dålig paketeringsstil att ändra i ursprungstarbollen om det inte är absolut nödvändigt. Se <xref linkend="basic-mistakes"/> för olika skäl.</para>

		<screen>
cp hello-2.1.1.tar.gz hello_2.1.1.orig.tar.gz
tar -xzvf hello_2.1.1.orig.tar.gz</screen>

		<warning><para>Att använda ett understräck, "_", mellan paketnamnet (hello) och versionen (2.1.1), istället för ett bindesträck, "-", är väldigt viktigt. Ditt källpaket kommer felaktigt byggas som ett nativt Debianpaket.</para></warning>

		<para>Vi har nu en katalog som heter <filename>hello-2.1.1</filename> som innehåler källkodsfilerna. Nu behöver vi skapa en extra katalog vid namn <application>debian</application> där all paketeringsinformation lagras, vilket låter oss separera paketeringsfilerna från källkodsfilerna.</para>

		<screen>
mkdir hello-2.1.1/debian
cd hello-2.1.1/debian/</screen>

		<para>Vi behöver nu skapa de nödvändiga filer alla <phrase>Ubuntus</phrase> källpaket kräver: <filename>changelog</filename>, <filename>control</filename>, <filename>copyright</filename> och <filename>rules</filename>. De här filerna krävs för att skapa de binära paketen (.deb-filer) från den ursprungliga (uppströms) källkoden. Vi kollar på dem en i taget.</para>
		
		<sect2>
			<title>changelog</title>
			
			<para>Filen <filename>changelog</filename> är, som namnet antyder, en lista över alla ändringar som gjorts i varje version. Den har ett speciellt format som berättar paketnamn, version, distribution, ändringar, vem som gjorde ändringarna, och när denne gjorde dem. Om du har en GPG-nyckel, se till att använda samma namn och email-adress i <filename>changelog</filename> som du har i din nyckel. Följande är en mall för <filename>changelog</filename>:</para>
			<screen>
paket (version) distribution; urgency=bråskandenivå

  * ändingsdetaljer
    fler ändringsdetaljer
  * ännu fler ändringsdetaljer

-- underhållarens namn &lt;e-postadress&gt;[två mellanslag]datum</screen>

			<para>Formatet (speciellt för datumet) är viktigt. Datumet ska vara i RFC822-formatet, som du kan få från programmet <application>822-date</application>.</para>

			<para>Här är en grundläggande <filename>changelog</filename>-fil för <application>hello</application>:</para>

			<screen>
hello (2.1.1-1) dapper; urgency=low

   * New upstream release with lots of bug fixes.

-- Captain Packager &lt;packager@coolness.com&gt; Wed, 5 Apr 2006 22:38:49 -0700</screen>

			<para>Notera att versionen har ett -1 tillagt till sig - det är det som kallas för Debianrevisionen, och används så att paketen kan uppdateras (för att fixa buggar till exempel) med nya uppladdningar av exakt samma källkodsversion.</para>

			<note><para><phrase>Ubuntu</phrase> och Debian har något olika paketversionssceman för att undvika konflikter då paketen består av samma källkodsversion. Om ett Debianpaket har ändrats i <phrase>Ubuntu</phrase> har det <emphasis>ubuntuX</emphasis> (där <emphasis>X</emphasis> är <phrase>Ubuntus</phrase> revisionsnummer) tillagt till slutet av Debianversionen. Så om Debians paket för <application>hello</application> ändrades av <phrase>Ubuntu</phrase> blir versionen <filename>2.1.1-1ubuntu1</filename>. Om ett paket för ett program inte finns i Debian blir <phrase>Ubuntus</phrase> version <emphasis>0</emphasis>(<emphasis>till exempel</emphasis> <filename>2.1.1-0ubuntu1</filename>).</para></note>
		
			<para>Titta nu på <filename>changelog</filename> för <phrase>Ubuntus</phrase> källpaket som vi laddade ner tidigare.</para>

			<screen>
less ../../ubuntu/hello-2.1.1/debian/changelog</screen>

			<para>Lägg märke till att i det här fallet är <emphasis>distribution</emphasis> <emphasis>unstable</emphasis> (en Debian-gren), eftersom Debianpaketet inte har ändrats av <phrase>Ubuntu</phrase>. Kom ihåg att sätta <emphasis>distribution</emphasis> till den distributionen du vill bygga paketet för.</para>

			<para>Nu, skapa en <filename>changelog</filename>-fil i katalogen <filename>debian</filename> där du fortfarande bör befinna dig.</para>
			
		</sect2>

		<sect2>
			<title>control</title>
			<para>Filen control innehåller information som pakethanteraren (till exempel <application>apt-get</application>, <application>synaptic</application> eller <application>aptitude</application>) använder, bygg-beroenden, underhållarinformation, och mycket mer.</para>
			<para>För <phrase>Ubuntu</phrase>-paketet <application>hello</application> ser control-filen ut ungefär såhär:</para>
			<para><screen>Source: hello
Section: devel
Priority: optional
Maintainer: Captain Packager &lt;packager@coolness.com&gt; 
Standards-Version: 3.6.1

Package: hello
Architecture: any
Depends: ${shlibs:Depends}
Description: The classic greeting, and a good example
 The GNU hello program produces a familiar, friendly greeting. It
 allows non-programmers to use a classic computer science tool which
 would otherwise be unavailable to them.
 .
 Seriously, though: this is an example of how to do a Debian
 package.
 It is the Debian version of the GNU Project's `hello world' program
 (which is itself an example for the GNU Project).</screen></para>

			<para>Skapa filen <filename>control</filename> med informationen ovan (se till att skriva in din information i fältet <emphasis>Maintainer</emphasis>).</para>
			
			<para>Det första stycket ger information om källpaketet. Låt oss gå igenom det, rad för rad:</para>
			<itemizedlist>
				
				<listitem><para><emphasis role="bold">Source:</emphasis> Det här är namnet på källpaketet, i det här fallet <emphasis>hello</emphasis>.</para></listitem>

				<listitem><para><emphasis role="bold">Section:</emphasis> Apt-förråden är uppdelade i avdelningen för att underlätta bläddring bland och kategorisering av program. I det här fallet hör <application>hello</application> till avdelningen <emphasis>devel</emphasis>.</para></listitem>

				<listitem><para><emphasis role="bold">Priority:</emphasis> Det här avgör hur viktigt paketet är för våra användare. Det bör vara något av följande:</para>

					<itemizedlist>
					
						<listitem><para><emphasis role="bold">Required</emphasis> - paket som är nödvändiga för att systemet ska fungera ordentligt. Om de tas bort är det sannolikt att ditt system går sönder på ett sätt som inte går att åtgärda.</para></listitem>
						
						<listitem><para><emphasis role="bold">Important</emphasis> - den minsta uppsättningen paket som krävs för ett användbart system. Att ta bort de här paketen orsakar inte att ditt system går sönder på något sätt som inte går att åtgärda, men de är oftast viktiga verktyg, utan vilka en Linuxdistribution skulle vara halvfärdig. Obs: Det här inkluderar inte saker som Emacs eller ens X Window System.</para></listitem>
						
						<listitem><para><emphasis role="bold">Standard</emphasis> - Ganska självförklarande.</para></listitem>
						
						<listitem><para><emphasis role="bold">Optional</emphasis> - i princip är den här kategorin för paket som inte krävs, eller de flesta paketen som finns. De här paketen får dock inte orsaka konflikter med varandra.</para></listitem>
						
						<listitem><para><emphasis role="bold">Extra</emphasis> - paket som får orsaka konflikter med paket i någon av ovastående kategorier. Används även för specialiserade paket som bara skulle vara användbart för personer som redan vet vad paketet används till.</para></listitem>
					
					</itemizedlist>
				</listitem>

				<listitem><para><emphasis role="bold">Maintainer:</emphasis> Paketunderhållaren med en e-postadress.</para></listitem>

				<listitem><para><emphasis role="bold">Standards-Version:</emphasis> Den version av <ulink url="http://www.debian.org/doc/debian-policy/">Debian Policy</ulink> som paketet uppfyller (i det här fallet: version 3.6.1). Ett enkelt sätt att hitta den aktuella versionen är <emphasis>apt-cache show debian-policy | grep Version</emphasis>.</para></listitem>

				<listitem><para><emphasis role="bold">Build-Depends:</emphasis> Ett av de viktigaste fälten, och ofta en källa till buggar. Den här raden listar de binära paket (med versioner om det är nödvändigt) som måste installeras för att skapa binära paket från källpaketet. De paket som är absolut nödvändiga är en del av <emphasis>build-essential</emphasis> och behöver inte inkluderas på den här raden. I fallet med <application>hello</application> behövs inga fler paket än de som är en del av build-essential, så vi behöver ingen Build-Depends-rad. Listan över paket som tillhör build-essential kan du hitta på <filename>/usr/share/doc/build-essential/list</filename>.</para></listitem>
			
			</itemizedlist>

		
			<para>Det andra stycket är för det binära paketet som kommer att byggas från källkoden. Om flera binära paket byggs från källpaketet bör det finnas en avdelning för <emphasis>varje</emphasis> paket. Än en gång, låt oss gå igenom det, rad för rad:</para>
			
			<itemizedlist>
			
				<listitem><para><emphasis role="bold">Package:</emphasis> Namnet på det binära paketet. Många gånger för enkla program (som med <application>hello</application>) är käll- och binärpaketets namn identiska.</para></listitem>
				
				<listitem><para><emphasis role="bold">Architecture:</emphasis> Arkitekturen som det binära paketet byggs för. Exempel är:</para>
					
					<itemizedlist>
						
						<listitem><para><emphasis role="bold">all</emphasis> - Källkoden är <emphasis>inte</emphasis> plattforms-beroende. Program som använder Python eller andra tolkade språk använder det här. Det resulterande paketets namn skulle sluta med <filename>_all.deb</filename>.</para></listitem>

						<listitem><para><emphasis role="bold">any</emphasis> - Källkoden <emphasis>är</emphasis> plattforms-beroende och bör kompilera på alla de arkitekturer som stödjs. Det kommer att skapas en .deb-fil för varje arkitektur (<filename>_i386.deb</filename> till exempel)</para></listitem>

						<listitem><para>Bara vissa arkitekturer (i386, amd64, ppc t ex) kan skrivas för att indikera att källkoden är platforms-beroende och inte fungerar på alla de arkitekturer som <phrase>Ubuntu</phrase> stödjer.</para></listitem>

					</itemizedlist></listitem>

				<listitem><para><emphasis role="bold">Depends:</emphasis> Listan över paket som det binära paketet beror på för sin funktionalitet. För <application>hello</application> ser vi <filename>${shlibs:Depends}</filename>, vilket är en variabel som byts ut mot de bibliotek som krävs. Se manualsidan för <filename>dpkg-source</filename> för mer information.</para></listitem>

				<listitem><para><emphasis role="bold">Recommends:</emphasis> Används för paket som starkt rekomenderas och vanligtvis installeras tillsammans med paketet. Vissa pakethanterare, bland annat <application>aptitude</application>, installerar automatiskt paket som är Recommended.</para></listitem>

				<listitem><para><emphasis role="bold">Suggests:</emphasis> Används för paket som är liknande eller användbara när det här paketet är installerat.</para></listitem>
				
				<listitem><para><emphasis role="bold">Conflicts:</emphasis> Används för paket som kommer att orsaka konflikter med det här paketet. Båda kan inte vara installerade på samma gång, och installeras det ena tast det andra bort.</para></listitem>

				<listitem><para><emphasis role="bold">Description:</emphasis> Både long och kort beskrivning används av pakethanterare. Formatet är:</para>
					
<screen>Beskrivning: &lt;enradsförklaring&gt;
 &lt;utökad information över flera rader&gt;</screen>

						<para>Notera att det är ett mellanslag i början av varje rad i den långa beskrivningen. Mer information om hur du skriver bra information hittar du på <ulink url="http://people.debian.org/~walters/descriptions.html">http://people.debian.org/~walters/descriptions.html</ulink>.</para></listitem>
				
			</itemizedlist>
					
		</sect2>

		<sect2>
			<title>copyright</title>

			<para>Den här filen innehåller copyrightinformation. För det mesta hittar du copyrightinformation i filen <filename>COPYING</filename> i programmets källkodskatalog. Den här filen bör innehålla information som namnen på upphovsmannen och paketeraren, adressen som källkoden kom från, en Copyright-rad med år och upphovsrättsinehavare, och texten med själva licensen. En exempelmall skulle vara:</para>

			<screen>This package was debianized by {Ditt namn} &lt;din e-postadress&gt;
{Date}

It was downloaded from: {URL till webbsida} 

Upstream Author(s): {Namn och e-postadress(er) på upphovsmannen/-männen}

Copyright:
	Copyright (C) {År} by {Upphovsman/-män} {e-postadress(er)}

License:

</screen>

			<para>Logiskt nog är <application>hello</application> licensierat under licensen GPL. I det här fallet är det enklast att kopiera <filename>copyright</filename>-filen från <phrase>Ubuntu</phrase>-paketet:</para>

			<screen>
cp ../../ubuntu/hello-2.1.1/debian/copyright .</screen>

			<para>Du måste inkludera den fullständiga licensen om den inte är GPL, LGPL, BSD eller artistic License, då du istället kan referera till motsvarande fil i katalogen <filename>/usr/share/common-licenses/</filename></para>

			<para>Notera att <phrase>Ubuntu</phrase>-paketens <filename>copyright</filename>-fil licensierar ut manualen. Det är viktigt att <emphasis>alla</emphasis> filer i källpaketet licensieras.</para>
			
		</sect2>	

		<sect2 id="basic-scratch-rules">
			<title>rules</title>
			
			<para>Filen <filename>rules</filename> är en körbar Makefile som har regler för att bygga binära paket från källpaket. För <application>hello</application> är det enklast att använda <filename>rules</filename> från <phrase>Ubuntu</phrase>-paketet:</para>

			<screen>#!/usr/bin/make -f
# Sample debian/rules file - for GNU Hello.
# Copyright 1994,1995 by Ian Jackson.
# I hereby give you perpetual unlimited permission to copy,
# modify and relicense this file, provided that you do not remove
# my name from the file itself. (I assert my moral right of
# paternity under the Copyright, Designs and Patents Act 1988.)
# This file may have to be extensively modified

package = hello
docdir = debian/tmp/usr/share/doc/$(package)

CC = gcc
CFLAGS = -g -Wall
INSTALL_PROGRAM = install

ifeq (,$(findstring noopt,$(DEB_BUILD_OPTIONS)))
  CFLAGS += -O2
endif
ifeq (,$(findstring nostrip,$(DEB_BUILD_OPTIONS)))
  INSTALL_PROGRAM += -s
endif

build:
        $(checkdir)
        ./configure --prefix=/usr
        $(MAKE) CC="$(CC)" CFLAGS="$(CFLAGS)"
        touch build

clean:
        $(checkdir)
        rm -f build
        -$(MAKE) -i distclean
        rm -rf *~ debian/tmp debian/*~ debian/files* debian/substvars

binary-indep: checkroot build
        $(checkdir)
# There are no architecture-independent files to be uploaded
# generated by this package. If there were any they would be
# made here.

binary-arch: checkroot build
        $(checkdir)
        rm -rf debian/tmp
        install -d debian/tmp/DEBIAN $(docdir)
        install -m 755 debian/postinst debian/prerm debian/tmp/DEBIAN
        $(MAKE) INSTALL_PROGRAM="$(INSTALL_PROGRAM)" \
                prefix=$$(pwd)/debian/tmp/usr install
        cd debian/tmp &amp;&amp; mv usr/info usr/man usr/share
        cp -a NEWS debian/copyright $(docdir)
        cp -a debian/changelog $(docdir)/changelog.Debian
        cp -a ChangeLog $(docdir)/changelog
        cd $(docdir) &amp;&amp; gzip -9 changelog changelog.Debian
        gzip -r9 debian/tmp/usr/share/man
        gzip -9 debian/tmp/usr/share/info/*
        dpkg-shlibdeps debian/tmp/usr/bin/hello
        dpkg-gencontrol -isp
        chown -R root:root debian/tmp
        chmod -R u+w,go=rX debian/tmp
        dpkg --build debian/tmp ..

define checkdir
        test -f src/$(package).c -a -f debian/rules
endef

binary: binary-indep binary-arch

checkroot:
        $(checkdir)
        test $$(id -u) = 0

.PHONY: binary binary-arch binary-indep clean checkroot
</screen>

			<para>Vi går igenom den här filen lite noggrannare. En av de första delarna du kommer att få syn på är deklarerandet av några variabler:</para>
			<screen>package = hello
docdir = debian/tmp/usr/share/doc/$(package)

CC = gcc
CFLAGS = -g -Wall
INSTALL_PROGRAM = install

ifeq (,$(findstring noopt,$(DEB_BUILD_OPTIONS)))
  CFLAGS += -O2
endif
ifeq (,$(findstring nostrip,$(DEB_BUILD_OPTIONS)))
INSTALL_PROGRAM += -s
endif
</screen>
			<para>Den här avdelningen sätter CFLAGS för kompilatorn och hanterar DEB_BUILD_OPTIONS-flaggorna <filename>noopt</filename> och <filename>nostrip</filename> för debugging.</para>
			
			<para>Härnäst kommer regeln <filename>build</filename>:</para>
			<screen>build:
	$(checkdir)
	./configure --prefix=/usr
	$(MAKE) CC="$(CC)" CFLAGS="$(CFLAGS)"
	touch build</screen>
			<para>Regeln kör emphasis&gt;./configure</para>
			<para>Nästa regel är <filename>clean</filename>, som kör <emphasis>make -i distclean</emphasis> och tar bort alla filer som skapades under byggandet av paketet.</para>

			<screen>clean:
	$(checkdir)
	rm -f build
	-$(MAKE) -i distclean
	rm -rf *~ debian/tmp debian/*~ debian/files* debian/substvars</screen>

			<para>Härnäst ser vi en tom regel <filename>binary-indep</filename>, eftersom det inte finns några plattforms-oberoende filer i det här paketet.</para>

			<para>Dock så finns det många plattforms-beroende filer, så <filename>binary-arch</filename> används:</para>

			<screen>binary-arch: checkroot build
		$(checkdir)
		rm -rf debian/tmp
		install -d debian/tmp/DEBIAN $(docdir)
		install -m 755 debian/postinst debian/prerm debian/tmp/DEBIAN
		$(MAKE) INSTALL_PROGRAM="$(INSTALL_PROGRAM)" \
		prefix=$$(pwd)/debian/tmp/usr install
		cd debian/tmp &amp;&amp; mv usr/info usr/man usr/share
		cp -a NEWS debian/copyright $(docdir)
		cp -a debian/changelog $(docdir)/changelog.Debian
		cp -a ChangeLog $(docdir)/changelog
		cd $(docdir) &amp;&amp; gzip -9 changelog changelog.Debian
		gzip -r9 debian/tmp/usr/share/man
		gzip -9 debian/tmp/usr/share/info/*
		dpkg-shlibdeps debian/tmp/usr/bin/hello
		dpkg-gencontrol -isp
		chown -R root:root debian/tmp
		chmod -R u+w,go=rX debian/tmp
		dpkg --build debian/tmp ..</screen>
			
			<para>För det första, notera att den här regeln anropar regeln <filename>checkroot</filename> för att se till att paketet byggs som root, och även anropar regeln <filename>build</filename> för att kompilera källkoden. Sedan skapas filerna <filename>debian/tmp/DEBIAN</filename> och <filename>debian/tmp/usr/share/doc/hello</filename> och skripten <filename>postinst</filename> och <filename>prerm&gt;</filename> installeras till <filename>debian/tmp/DEBIAN</filename>. Sedan körs <emphasis>make install</emphasis> med ett prefix som installerar till katalogen <filename>debian/tmp/usr</filename>. När det är klart gzippas och installeras dokumentationsfilerna (NEWS, ChangeLog och debians changelog). <emphasis>dpkg-shlibdeps</emphasis> körs sedan för att hitta de delade bibliotek programmet <application>hello</application> beror på, och det lagrar listan i filen <filename>debian/substvars</filename> för variabeln ${shlibs:Depends} i <filename>control</filename>. Sedan körs <emphasis>dpkg-gencontrol</emphasis> för att skapa en control-fil för det binära paketet, och det utför de ersättningar som genererades av <emphasis>dpkg-shlibdeps</emphasis>. Till slut, när rättigheterna på <filename>debian/tmp</filename> är korrekta, körs <emphasis>dpkg --build</emphasis> för att bygga det binära .deb-paketet, och lägga det i katalogen ovanför den vi är i.</para>

		</sect2>

		<sect2> 
			<title>postinst och prerm</title> 
			
			<para>Filerna <filename>postinst</filename> och <filename>prerm</filename> är exempel på underhållarskript. De är skalskript som körs efter installationen respektive före borttagningen av ett paket. I fallet med <phrase>Ubuntus</phrase> <application>hello</application>-paket används de till att installera (och ta bort) info-filen. Varsågod och kopiera dem till den här <filename>debian</filename>-katalogen.</para>

			<screen>
cp ../../ubuntu/hello-2.1.1/debian/postinst .
cp ../../ubuntu/hello-2.1.1/debian/prerm .</screen>
		
		</sect2>

		<sect2>
			<title>Bygga och ta bort källpaketet</title>
			
			<para>Nu när vi har gått igenom filerna i katalogen <filename>debian</filename> for <application>hello</application> i detalj kan vi bygga käll- och binärpaketen. Först går vi till huvudkatalogen för den uppackade källkoden</para>
			
			<para><screen>cd ..</screen></para>
			
			<para>Nu bygger vi källpaketet med <application>dpkg-buildpackage</application>:</para>
			
			<para><screen>dpkg-buildpackage -S -rfakeroot</screen></para>
			
			<para>Flaggan -S säger till <application>dpkg-buildpackage</application> att bygga ett källpaket, och -r-flaggan berättar för det att använda <application>fakeroot</application> för att ge oss fejkade root-rättigheter när vi bygger paketet. <application>dpkg-buildpackage</application> kommer att ta filen <filename>.orig.tar.gz</filename> och skapa en <filename>.diff.gz</filename> (skillnaden mellan original-tarbollen från skaparen och den katalogen vi har skapat, med <filename>debian/</filename> och dess innehåll) och en <filename>.dsc</filename>-fil som har beskrivningen och md5summor för källpaketet. Filerna <filename>.dsc</filename> och <filename>*_source.changes</filename> (används för att ladda upp källpaketet) blir signerade med din GPG-nyckel. Om du inte har någon GPG-nyckel, lägg till flaggorna <emphasis>-us -uc</emphasis> till raden där du kör <application>dpkg-buildpackage</application>. Ditt paket kommer att byggas men det kan inte laddas upp utan att ha blivit signerat.</para>
			
			<para>Förutom ett källpaket kan vi dessutom bygga ett binärt paket med <application>pbuilder</application>:</para>
			
			<para><screen>sudo pbuilder build ../*.dsc</screen></para>

			<para>Det är väldigt viktigt att använda <application>pbuilder</application> för att bygga de binära paketen. Det ser till att build-beroendena är riktiga, eftersom <application>pbuilder</application> bara ger dig en minimal miljö, varpå alla bygg-beroenden avgörs av <filename>control</filename>-filen.</para>
			
			<para>Vi kan kontrollera källpaketet efter vanliga misstag genom att använda <application>lintian</application>:</para>
			
			<screen>cd ..
lintian -i *.dsc</screen>
			
		</sect2>

	</sect1>

	<sect1 id="basic-debhelper" status="complete">
		<title>Paketera med Debhelper</title>
		
		<important><para><emphasis role="bold">Krav:</emphasis> Det som krävdes i avdelningen <xref linkend="basic-scratch"/> plus debhelper och dh-make</para>
		</important>

		<para>Som en paketerare kommer du sällan att skapa paket från scratch som vi gjorde i förra avdelningen. Som du kanske förstår är mycket av uppgifterna och informationen i till exempel <filename>rules</filename>-filen gemensamt mellan paket. För att göra paketering lättare och mer effektivt kan du använda <application>debhelper</application> för att få hjälp med de här uppgifterna. Debhelper är en uppsättning Perl-skript (alla har ett namn som börjar med <emphasis>dh_</emphasis>) som automatiserar paket-byggandet. Med de här skripten blir det ganska enkelt att bygga Debianpaket.</para>

		<para>I det här exemplet kommer vi åter att bygga paketet GNU Hello, men den här gången kommer vi jämföra vårt jobb med <phrase>Ubuntu</phrase>-paketet <application>hello-debhelper</application>. Åter igen, skapa en katalog där du kommer arbeta:</para>

		<screen>mkdir ~/hello-debhelper
cd ~/hello-debhelper
wget http://ftp.gnu.org/gnu/hello/hello-2.1.1.tar.gz
mkdir ubuntu
cd ubuntu</screen>
		

		<para>Ladda sedan ner <phrase>Ubuntus</phrase> källpaket</para>

		<screen>apt-get source hello-debhelper
cd ..</screen>

		<para>Precis som i senaste exemplet är det första vi behöver göra att packa upp den ursprungliga (uppströms) tarbollen.</para>

		<screen>tar -xzvf hello-2.1.1.tar.gz</screen>

		<para>Istället för att kopiera uppströmstarbollen till <filename>hello_2.1.1.orig.tar.gz</filename> som vi gjorde i förra exemplet låter vi <application>dh_make</application> göra jobbet åt oss. Det enda du behöver göra är att döpa om källmappen så att namnet blir i formen <emphasis>&lt;paketnamn&gt;-&lt;version&gt;</emphasis> där paketnamn är skrivet med gemener. I det här exemplet får vi automatiskt en källkatalog med rätt namn när vi untarar tarbollen, så vi behöver bara gå in i den.</para>

		<screen>cd hello-2.1.1</screen>

		<para>För att göra den ursprungliga "debianisationen" av källkoden kommer vi att använda <application>dh_make</application>.</para>

		<screen>
dh_make -e din.e-post@adress -f ../hello-2.1.1.tar.gz
		</screen>

		<para>dh_make kommer sedan ställa en rad frågor till dig:</para>

		<screen>
Type of package: single binary, multiple binary, library, kernel module or cdbs?
[s/m/l/k/b] <emphasis role="bold">s</emphasis></screen>

		<screen>
Maintainer name : Captain Packager
Email-Address : packager@coolness.com
Date : Thu, 6 Apr 2006 10:07:19 -0700
Package Name : hello
Version : 2.1.1
License : blank
Type of Package : Single
Hit &lt;enter&gt; to confirm: <emphasis role="bold">Enter</emphasis></screen>

		<caution><para>Kör bara <application>dh_make -e</application> en gång. Om du kör det igen efter att ha kört det en första gång kommer det inte att fungera. Om du vill ändra på det eller om du gjorde ett misstag, ta bort källkatalogen och untara uppströmstarbollen igen. Gå sedan in i källkatalogen och försök igen.</para></caution>
		
		<para>När du kör <application>dh_make -e</application> händer två saker:</para>

		<orderedlist> 
			
			<listitem><para>Filen <filename>hello_2.1.1.orig.tar.gz</filename> skapas i katalogen ovanför den du är i.</para></listitem>

			<listitem><para>De grundläggande filerna som behövs i <filename>debian/</filename> och många mallfiler (.ex) som kanske behövs skapas.</para></listitem>
			
		</orderedlist>

		<para>Programmet <application>Hello</application> är inte särskillt komplicerat, och som vi såg i <xref linkend="basic-scratch"/> krävs det inte mycket mer än de grundläggande filerna för att paketera det. Vi tar därför bort alla <filename>.ex</filename>-filer:</para>

		<screen>cd debian
rm *.ex *.EX</screen>

		<para>For <application>hello</application>, you will also not need
			<filename>README.Debian</filename> (README file for specific
			Debian issues, not the program's README), <filename>dirs</filename>
			(used by <application>dh_installdirs</application> to create
			needed directories), <filename>docs</filename> (used by
			<application>dh_installdocs</application> to install program
			documentation), or <filename>info</filename> (used by
			<application>dh_installinfo</application> to install the info
			file) files into the <filename>debian</filename> directory. For more
			information on these files, see <xref linkend="appendix-examples"/>.</para>

		<para>Vid det här laget bör du bara ha filerna <filename>changelog</filename>, <filename>compat</filename>, <filename>control</filename>, <filename>copyright</filename> och <filename>rules</filename> i katalogen <filename>debian</filename>. Jämfört med <xref linkend="basic-scratch"/> är den enda nyheten <filename>compat</filename>, som är en fil som innehåller versionen på <application>debhelper</application> (i det här fallet 4).</para>

		<para>Du behöver justera filen <filename>changelog</filename> en smula för att visa att det här paketet heter <application>hello-debhelper</application>, och inte bara <application>hello</application>:</para>

		<screen>
hello-debhelper (2.1.1-1) dapper; urgency=low

  * Initial release

  -- Captain Packager &lt;packager@coolness.com&gt; Thu, 6 Apr 2006 10:07:19 -0700</screen>
		
		<para>Genom att använda <application>debhelper</application> behöver du i <filename>control</filename> bara ändra namnet (byt ut <application>hello</application> mot <application>hello-debhelper</application>) och lägga till <application>debhelper (&gt;= 4.0.0)</application> till fältet <emphasis>Build-Depends</emphasis> i källpaketet. <phrase>Ubuntus</phrase> paket för <application>hello-debhelper</application> ser ut såhär:</para>

		<screen>
Source: hello-debhelper
Section: devel
Priority: extra
Maintainer: Capitan Packager &lt;packager@coolness.com&gt;
Standards-Version: 3.6.1
Build-Depends: debhelper (&gt;= 4)

Package: hello-debhelper
Architecture: any
Depends: ${shlibs:Depends}
Conflicts: hello
Provides: hello
Replaces: hello
Description: The classic greeting, and a good example
 The GNU hello program produces a familiar, friendly greeting. It
 allows non-programmers to use a classic computer science tool which
 would otherwise be unavailable to them.
 .
 Seriously, though: this is an example of how to do a Debian package.
 It is the Debian version of the GNU Project's `hello world' program
 (which is itself an example for the GNU Project).
 .
 This is the same as the hello package, except it uses debhelper to
 make the deb. Please see debhelper as to what it is.
		</screen>

		<para>Vi kan kopiera filen <filename>copyright</filename> och skripten <filename>postinst</filename> och <filename>prerm</filename> från <phrase>Ubuntus</phrase> <application>hello-debhelper</application>-paket, eftersom de inte har ändrat sig sedan <xref linkend="basic-scratch"/>. Vi kommer även att kopiera filen <filename>rules</filename> så vi kan inspektera den.</para>

		<screen>
cp ../../ubuntu/hello-debhelper-2.1.1/debian/copyright .
cp ../../ubuntu/hello-debhelper-2.1.1/debian/postinst .
cp ../../ubuntu/hello-debhelper-2.1.1/debian/prerm .
cp ../../ubuntu/hello-debhelper-2.1.1/debian/rules.</screen>

		<para>The last file we need to look at is <filename>rules</filename>,
			where the power of
			<application>debhelper</application> scripts can be seen. The
			<application>debhelper</application> version of
			<filename>rules</filename> is somewhat smaller (54 lines as
			opposed to 72 lines in the version from <xref linkend="basic-scratch-rules"/>).</para>

		<para>Versionen från <application>debhelper</application> ser ut såhär:</para>

		<screen> #!/usr/bin/make -f

package = hello-debhelper

CC = gcc
CFLAGS = -g -Wall

ifeq (,$(findstring noopt,$(DEB_BUILD_OPTIONS)))
  CFLAGS += -O2
endif

#export DH_VERBOSE=1

clean:
        dh_testdir
        dh_clean
        rm -f build
        -$(MAKE) -i distclean

install: build
        dh_clean
        dh_installdirs
        $(MAKE) prefix=$(CURDIR)/debian/$(package)/usr \
                mandir=$(CURDIR)/debian/$(package)/usr/share/man \
                infodir=$(CURDIR)/debian/$(package)/usr/share/info \
                install

build:
        ./configure --prefix=/usr
        $(MAKE) CC="$(CC)" CFLAGS="$(CFLAGS)"
        touch build

binary-indep: install
# There are no architecture-independent files to be uploaded
# generated by this package. If there were any they would be
# made here.

binary-arch: install
        dh_testdir -a
        dh_testroot -a
        dh_installdocs -a NEWS
        dh_installchangelogs -a ChangeLog
        dh_strip -a
        dh_compress -a
        dh_fixperms -a
        dh_installdeb -a
        dh_shlibdeps -a
        dh_gencontrol -a
        dh_md5sums -a
        dh_builddeb -a

binary: binary-indep binary-arch

.PHONY: binary binary-arch binary-indep clean checkroot
			</screen>

		<para>Notera att uppgifter som att testa om du är i rätt katalog (<application>dh_testdir</application>), kontrollera att du bygger paketet med root-rättigheter (<application>dh_testroot</application>), installera dokumentation <application>dh_installdocs</application> och <application>dh_installchangelogs</application>) och städa undan när paketet är byggt (<application>dh_clean</application>) hanteras automatiskt. Många paket som är mycket mer komplicerade än <application>hello</application> har lika små <filename>rules</filename>-filer eftersom <application>debhelper</application>-skripten hanterar de flesta uppgifterna. För en komplett lista över <application>debhelper</application>-skript, läs <xref linkend="appendix-debhelper"/>. De är också väl dokumenterade i sina respektive <application>man</application>-sidor. Det är en användbar övning att läsa man-sidor (de är välskrivna och inte särskillt långa) för vart och ett av hjälpskripten som används i ovastående <filename>rules</filename>-fil.</para>

			<sect2>
			<title>Bygga och ta bort källpaketet</title>
			
			<para>Nu när vi har gått igenom filerna i katalogen <filename>debian</filename> för <application>hello-debhelper</application> kan vi bygga käll- och binärpaketen. Vi går först tillbaka till källkatalogen:</para>
			
			<para><screen>cd ..</screen></para>
			
			<para>Nu kan vi bygga källpaketet med <application>debuild</application>, ett skript som kör <application>dpkg-buildpackage</application>:</para>
			
			<para><screen>debuild -S</screen></para>
			
			<para>det binära paketet, med <application>pbuilder</application>:</para>
			
			<para><screen>sudo pbuilder build ../*.dsc</screen></para>

			<para>och till slut leta i källpaketet med <application>lintian</application>:</para>
			
			<screen>cd ..
lintian -i *.dsc</screen>
			
		</sect2>
	
	</sect1>

	<sect1 id="basic-cdbs" status="complete">
		<title>Paketera med CDBS</title>

		<para>CDBS är ett verktyg som använder debhelper för att göra det ännu enklare att bygga och underhålla Debianpaket. Det har många fördelar:</para>

			<itemizedlist>
				<listitem><para>Det producerar en kort, läsvänlig och effektiv <filename>debian/rules</filename></para></listitem>
				
				<listitem><para>Det automatiserar debhelper och autotools åt dig, så att du slipper bry dig om återkommande uppgifter.</para></listitem>
				
				<listitem><para>Det hjälper dig att fokusera på viktigare paketproblem, eftersom det hjäper till utan att begränsa anpassning</para></listitem>
				
				<listitem><para>Det har vältestade klasser, så att du slipper använda olika fulhack för att lösa vanliga problem</para></listitem>
				
				<listitem><para>Det är enkelt att byta till CDBS</para></listitem>
				
				<listitem><para>Det är utbyggbart</para></listitem>
			</itemizedlist>
		
		<sect2>
			<title>Använda CDBS i paket</title>
		
			<para>Att använda CDBS för <phrase>Ubuntu</phrase>-paket är väldigt enkelt. Efter att ha lagt till <application>cdbs</application> till Build-Depends i <filename>debian/control</filename> kan en grundläggande <filename>debian/rules</filename>-fil med CDBS få plats på två rader. För ett enkelt program skrivet i C/C++ utan några extra regler, som <application>hello</application>, kan <filename>debian/rules</filename> se ut såhär:</para>

			<screen>#!/usr/bin/make -f
				
include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/autotools.mk</screen>

			<para>Det här är allt du behöver för att bygga programmet! CDBS hanterar installation och upprensning. Du kan sedan använda filerna <filename>.install</filename> och <filename>.info</filename> för att anpassa ditt program med de vanliga debhelper-funktionerna i olika delar av <filename>debian/rules</filename>.</para>

			<warning><para>Använd inte DEB_AUTO_UPDATE_DEBIAN_CONTROL:=yes för att automatiskt ändra <filename>debian/control</filename>. Det kan orsaka dåliga saker, och Debian anser att det är ett skäl till att neka ett paket från att komma in i arkiven. Läs <ulink url="http://ftp-master.debian.org/REJECT-FAQ.html"> http://ftp-master.debian.org/REJECT-FAQ.html</ulink> för mer information.</para></warning>
			
			<para>Som du kan se fungerar CDBS i princip genom att inkludera <filename>.mk</filename> Makefiles i <filename>debian/rules</filename>. Paketet <application>cdbs</application> ger dig sådana filer i <filename>/usr/share/cdbs/1/</filename> som låter dig göra utföra paketeringsuppgifter. Andra paket, som till exempel <application>quilt</application>, lägger till moduler till CDBS och kan användas som Build-Depends. Notera att du också kan använda dina egna CDBS-regler och inkludera dessa i paketet. De mest användbara modulerna som ingår i <application>cdbs</application> är:</para>

			<itemizedlist>
				
				<listitem><para><filename>rules/debhelper.mk</filename>: Anropar debhelper på alla platser det behövs</para></listitem>
			
				<listitem><para><filename>rules/dpatch.mk</filename>: Låter dig använda dpatch för att förenkla att patcha källkoden</para></listitem>
				
				<listitem><para><filename>rules/simple-patchsys.mk</filename>: Erbjuder ett väldigt enkelt sätt att patcha källkoden</para></listitem>
				
				<listitem><para><filename>rules/tarball.mk</filename>: Låter dig bygga paket med komprimerade tarbollar i paketet</para></listitem>
				
				<listitem><para><filename>class/autotools.mk</filename>: Anropar autotools på alla platser det behövs</para></listitem>
				
				<listitem><para><filename>class/gnome.mk</filename>: Bygger GNOME-program (kräver motsvarande Build-Depends i <filename>debian/control</filename>)</para></listitem>
				
				<listitem><para><filename>class/kde.mk</filename>: Bygger KDE-program (kräver motsvarande Build-Depends i <filename>debian/control</filename>)</para></listitem>
				
				<listitem><para><filename>class/python-distutils.mk</filename>: Bygger Python-program</para></listitem>
			
			</itemizedlist>
		</sect2>
		
		<sect2>
			<title>Mer information om CDBS</title>
		
			<para>För mer information om CDBS, se Marc Dequènes guide på <ulink url="https://perso.duckcorp.org/duck/cdbs-doc/cdbs-doc.xhtml">https://perso.duckcorp.org/duck/cdbs-doc/cdbs-doc.xhtml</ulink>.</para>
		
		</sect2>
	</sect1>
		
	<sect1 id="basic-updating" status="complete">
		<title>Uppdatera paket</title>

			<para>Om du har använt Linuxdistributioner ett tag har du säkert upptäckt att det ibland finns buggar i program. I Debian och <phrase>Ubuntu</phrase> fixas ofta buggarna i paketeringen genom att källkoden patchas. Ibland finns det buggar i själva paketeringen som kan orsaka svårigheter.</para>

			<para>För att patcha programmets källkod kan du helt enkelt ladda ner det aktuella källpaketet för <phrase>Ubuntu</phrase> (med <application>apt-get source</application>) och göra de ändringar som krävs. Du kan sedan lägga till en ny rad i <filename>debian/changelog</filename> genom att köra <application>dch -i</application> eller <application>dch -v &lt;version&gt;-&lt;revision&gt;</application> för att specificera den nya versionen. När du kör <application>debuild -S</application> från källkatalogen får du ett nytt källpaket med en ny <filename>.diff.gz</filename> i katalogen ovanför som innehåller dina ändringar. Problemet med den här metoden är att skillnaden mellan källkod och patchar är otydlig.</para>

			<para>En lösning på det här problemet är att separera ändringarna i källkoden i individuella patchar som lagras i katalogen <filename>debian</filename>. Ett av de systemen kallas <application>dpatch</application>. Ändringarna lagras i katalogen <filename>debian/patches/</filename> och har ett speciellt format.</para>

			<para>För att skapa en <application>dpatch</application>, utför följande steg.</para>

			<para>Skapa en temporär arbetsplats och två kopior av den aktuella källkodskatalogen.</para>
			
			<screen>
mkdir tmp
cd tmp
cp -a ../&lt;paket&gt;-&lt;version&gt; . 
cp -a &lt;paket&gt;-&lt;version&gt; &lt;paket&gt;-&lt;version&gt;.orig 
</screen>

			<para>Gör ändringarna i katalogen <filename>&lt;paket&gt;-&lt;version&gt;</filename>.</para>

			<para>Skapa en patch med <application>diff</application></para>

			<screen>
diff -Nru &lt;paket&gt;-&lt;version&gt;.orig &lt;paket&gt;-&lt;version&gt; &gt; patch-fil
</screen>

			<para>Skapa en <application>dpatch</application> genom att köra <application>dpatch patch-template</application> och skapa en fil som heter <filename>00list</filename>  som listar dpatcharna:</para>
			<screen>
dpatch patch-template -p "01_patchnamn" "patchfil-beskrivning" \
	&lt; patch-fil &gt; 01_patchnamn.dpatch
echo 01_patchnamn.dpatch &gt;00list</screen>

			<para>Du kan nu lägga <filename>01_patchnamn.dpatch</filename> och <filename>00list</filename> i katalogen <filename>debian/patches</filename> i ditt källpaket:</para>

			<screen>
mkdir ../&lt;paket&gt;-&lt;version&gt;/debian/patches
cp 01_patchnamn.dpatch 00list ../&lt;paket&gt;-&lt;version&gt;/debian/patches
cd ..
rm -rf tmp
			</screen>

			<note><para>Du kan också ändra på en patch som redan finns genom att använda <application>dpatch-edit-patch</application>.</para></note>
			
		<para>När alla ändringar har utförts och du har lagt till en changelog-post och <application>dpatch</application> har lagts till filen <filename>debian/control</filename> (om det behövs) kan du bygga om källpaketet med <application>debuild -S</application>.</para>

		<para>För att ditt fixade källpaket ska laddas upp till förråden i <phrase>Ubuntu</phrase> måste du få ditt källpaket sponsrat av någon som har uppladdningsrättigheter. Läs <xref linkend="ubuntu-upload"/> för fler detaljer. Ibland är det enklare och effektivare att bara ge bort skillnaden mellan källpaketet som ligger i förrådet och ditt uppdaterade paket, än att ge bort hela källpaketet (.diff.gz, .dsc och .orig.tar.gz). Ett verktyg har skapats för att göra just det - <application>debdiff</application>. Att använda <application>debdiff</application> är ungefär som att använda <application>diff</application> men det är skapat speciellt för paket. Du kan göra en <application>debdiff</application> på källpaktet genom att skriva:</para>

		<screen>
debdiff &lt;gammaltpaket&gt;.dsc &lt;nyttpaket&gt;.dsc &gt; paket.debdiff
		</screen>

		<para>eller på det binära paktet genom att skriva:</para>

		<screen>
debdiff &lt;gammaltpaket&gt;.deb &lt;nyttpaket&gt;.deb &gt; paket.debdiff
		</screen>
	
		<para>Debdiffar är bra att skicka med buggrapporter så att de finns tillgängliga för en sponsor att ladda upp.</para>
		
	</sect1>

	<sect1 id="basic-mistakes" status="complete">
		<title>Vanliga misstag</title>
			
		<sect2 id="basic-ex_files">
			<title>Exempelfiler från dh_make</title>
			
			<para>När du använder dh_make för att utföra den ursprungliga "debianisationen" skapas exempelfiler för olika uppgifter i katalogen <filename>debian/</filename>. De här mallarna har filändelsen .ex. Om du vill använda en av dem, byt namn på den genom att ta bort filändelsen. Om du inte behöver den, ta bort den för att hålla katalogen <filename>debian/</filename> ren.</para>

		</sect2>

		<sect2 id="basic-orig-tarball">
			<title>Ändra i den ursprungliga tarbollen</title>

			<para>Det finns två typer av källpaket: native och icke-native. Ett paket som är native är specifikt för <phrase>Ubuntu</phrase>/Debian. I katalogen <application>debian/</application> finns det information om alla ändringar som har gjorts i källkoden som finns med i tarbollen (vanligtvis &lt;paketnamn&gt;_&lt;version&gt;.tar.gz). Icke-native-paket är vanligare. Ett icke-native-paket delar upp källpaketet i en &lt;paketnamn&gt;_&lt;version&gt;.orig.tar.gz-tarboll som är identisk (forhoppningsvis även md5summan) med tarbollen som laddades ner från projektets hemsida och en .diff.gz-fil som innehåller skillnaderna (katalogen <filename>debian/</filename> och patchar) från original-tarbollen.</para>

			<para>Här är en lista över potentiella problem som kan uppstå om du ändrar på den ursprungliga tarbollen:</para>
		
			<orderedlist>

				<listitem><para>Reproducerbarhet</para>

					<para>Om du bara tar filerna .diff.gz och .dsc kan inte du eller någon annan reproducera ändringarna i den ursprungliga tarbollen.</para></listitem>

				<listitem><para>Uppgraderbarhet</para>
		
					<para>Det är mycket enklare att uppgradera till en ny uppströmsversion (ny version från skaparen) om .orig.tar.gz-filen sparas och det finns en tydlig avgränsning mellan uppströms-källkod och ändringarna som gjordes för att skapa källpaketet för <phrase>Ubuntu</phrase>.</para> </listitem>

				<listitem><para>Synkronisering från Debian till <phrase>Ubuntu</phrase></para>

					<para>Om originaltarbollarna ändras blir det svårt att automatiskt synkronisera från Debian till <phrase>Ubuntu</phrase>. Normalt ändras bara filerna .diff.gz och .dsc för samma uppströmsversion, eftersom .orig.tar.gz-filen ddelas melan alla Debian- och <phrase>Ubuntu</phrase>-revisioner. Det är mycket svårare att synkronisera om md5summorna för orig.tar.gz-filerna inte stämmer överens.</para> </listitem>

				<listitem><para>Användning av versionshantering för Debianpaket</para>
					
					<para>Om du använder svn (<application>svn-buildpackage</application>) för att hantera ditt Debianpaket sparar du vanligtvis inte original-tarbollen inuti. Om någon annan gör en checkout måste han/hon skaffa sig originaltarbollen separat. Andra versionshanteringssystem kan användas för att bara spåra paketeringsfilerna (<filename>debian/</filename> m fl) och inte hela källkoden. Om inte .orig.tar.gz är samma fil kan det självklart uppstå problem.</para></listitem>

				<listitem><para>Säkerhetsspårning</para>

					<para>Tänk dig en situation där någon <emphasis>vill</emphasis> lägga till en bakdörr, ett rootkit eller andra elakheter. Om original-tarbollen är oförändrad går det enkelt att söka igenom .diff.gz-filen i jakt på elakheter från personen som modifierade paketet. Om tarbollen ändrades måste man däremot dessutom leta efter skillnader mellan den modifierade tarbollen och originalet.</para>
		
						<note><para>Du måste fortfarande tro att de som skrev programmet inte försökte göra något elakt, men det måste du oavsett om tarbollen ändras eller inte.</para></note></listitem>

				<listitem><para>.diff.gz-filen</para>
						
					<para>Du kan redan använda en .diff.gz-fil för att visa ändringarna om originaltarbollen redan finns, så det är enkelt att göra ändringar utan att röra originaltarbollen.</para></listitem>
				
			</orderedlist>


			<para><emphasis role="bold">Det är acceptabelt att ändra på originaltarbollen om en eller flera av följande punkter stämmer:</emphasis></para>

			<itemizedlist>
	
				<listitem><para>Den inne håller icke-fria delar som inte kan distribueras vidare. Ta bort dessa saker och skriv ner det i paketet. Ofta innehåller sådana paket "dfsg" (som står för Debian Free Software Guidelines) i paketnamnet och/eller versionsnummret för att visa att de icke-fria delarna har tagits bort.</para></listitem>
					
				<listitem><para>Upphovsmännen tillhandahar bara en bzip2-paketerad källa.</para>
					<itemizedlist>
						
						<listitem><para>Bara <application>bunzip2</application>:a .tar.bz2-filen och kör <application>gzip -9 </application> på den resulterande tar-filen.</para></listitem>
							
						<listitem><para>md5summorna på den .tar du tillhandahåller måste matcha de från original-tar-filen!</para></listitem>
	
						<listitem><para>Lägga så småningom till en get-orig-source-regel i debian/rules som gör den här förvandlingen automatiskt.</para></listitem>
					
					</itemizedlist>
				</listitem>
					
				<listitem><para>Direktimporterat från SVN</para>
					<itemizedlist>
						<listitem><para>Lägg till get-orig-source i debian/rules</para></listitem>
					</itemizedlist>
				</listitem>
	
			</itemizedlist>

			<para><emphasis role="bold">Följande är <emphasis>inte</emphasis> skäl till att ändra den ursprungliga tarbollen:</emphasis></para>
			
			<itemizedlist>
				
				<listitem><para>Felaktig kataloglayout</para>
					
					<note><para><application>dpkg-source</application> är ganska flexibelt och klarar av att skapa korrekt kataloglayout även om:</para></note>
						
					<itemizedlist>
						
						<listitem><para>Katalogen inuti tarbollen inte heter &lt;uppström&gt;-&lt;version&gt;.</para></listitem>
				
						<listitem><para>Det finns ingen underkatalog i tarbollen.</para></listitem>
					</itemizedlist>
			
				</listitem>
			
				<listitem><para>Filer behöver tas bort för att .diff.gz-filen ska bli mindre (t ex filer som skapades av autotools). Allt som behöver tas bort ska tas bort i <application>clean</application> . rule. Eftersom .diff.gz-filen skapas med diff -u kommer du inte se några borttagna filer i .diff.gz-filen.</para></listitem>
										
				<listitem><para>Filer behöver ändras. Filer som behöver ändras ska vara i .diff.gz. Det är därför den finns!</para></listitem>
				
				<listitem><para>Fel rättigheter på filer. Du kan använda <filename>debian/rules</filename> för att göra det.</para></listitem>
	
			</itemizedlist>
			
			
			<tip><para>Vad gör jag med en .orig.tar.gz som redan innehåller en <filename>debian/</filename>-katalog?</para>
					
				<para>Packa inte om den. Du kan be upphovsmannen/-männen att ta bort katalogen debian/ och skicka en .diff.gz istället. Det här gör det enklare att granska deras jobb.</para>
			</tip>
				
			<note><para>Det är alltid en bra idé att kontakta upphovsmannen/-männnen till programmet och fråga om du får fixa autoconf-problem, katalogstruktur, en utdaterad adress till Free Software Foundation i COPYRIGHT-filer, eller andra saker som inte är specifika till paketeringen men skulle underlätta för dig så att du inte behöver "patcha" källkoden i .diff.gz.</para></note>
		
		</sect2>

		<sect2>
			<title>Copyrightinformation</title>

			<para>Filen <filename>debian/copyright</filename> ska innehålla:</para>
			
			<itemizedlist>
				
				<listitem><para>Licensinformationen för <emphasis>alla</emphasis> filer i källkoden. Ibland lägger upphovsmännen en licens i <filename>COPYING</filename> men har annan licensinformation i vissa av filerna i källkoden.</para></listitem>

				<listitem><para>Upphovsrättshavaren/-havarna och år.</para></listitem>

				<listitem><para><emphasis>Hela</emphasis> licensen om den inte är en av de som finns i <filename>/usr/share/common-licenses</filename>. Om den finns där behöver du bara inkludera förordet (preamble).</para></listitem>

			</itemizedlist>
				
		</sect2>

	</sect1>

</chapter>
