<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" 
	"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY % globalent SYSTEM "../../../libs/global.ent">
%globalent;
<!ENTITY % genericent SYSTEM "../../libs/generic.ent">
%genericent;
<!ENTITY % cdo-C SYSTEM "../../../libs/cdo-C.ent">
%cdo-C;
<!ENTITY % gnome-menus-C SYSTEM "../../../ubuntu/libs/gnome-menus-C.ent">
%gnome-menus-C;
<!ENTITY % xinclude SYSTEM "../../../libs/xinclude.mod">
%xinclude;
<!ENTITY language "&EnglishAmerican;">
]>
	<chapter id="dns" status="complete">
		<title>Domain Name Service (DNS)</title>
            <para>Domain Name Service (DNS) is an Internet service that maps IP addresses and fully
                qualified domain names (FQDN) to one another. In this way, DNS alleviates the need to
                remember IP addresses. Computers that run DNS are called
                <emphasis>name
                servers</emphasis>. Ubuntu ships with <application>BIND</application> (Berkley
                Internet Naming Daemon), the most common program used for maintaining a name
                server on Linux.</para>
            <!-- things to do: IPv6-->
      <sect1 id="dns-installation" status="complete">
        <title>Installation</title>
          <para>At a terminal prompt, enter the following command to install
                  <application>dns</application>:</para>
          <para>
<screen>
<command>sudo apt-get install bind9</command>
</screen>
          </para>
      </sect1>
      <sect1 id="dns-configuration" status="complete">
        <title>Configuration</title>
          <para>
          The DNS configuration files are stored in the
          <filename>/etc/bind</filename> directory. The
          primary configuration file is
         <filename>/etc/bind/named.conf</filename>. The content
          of the default configuration file is shown below:
          </para>

          <para>
<programlisting>
// This is the primary configuration file for the BIND DNS server named.
//
// Please read /usr/share/doc/bind9/README.Debian.gz for information on the 
// structure of BIND configuration files in Debian, *BEFORE* you customize 
// this configuration file.
//
// If you are just adding zones, please do that in /etc/bind/named.conf.local

include "/etc/bind/named.conf.options";

// prime the server with knowledge of the root servers
zone "." {
	type hint;
	file "/etc/bind/db.root";
};

// be authoritative for the localhost forward and reverse zones, and for
// broadcast zones as per RFC 1912

zone "localhost" {
	type master;
	file "/etc/bind/db.local";
};

zone "127.in-addr.arpa" {
	type master;
	file "/etc/bind/db.127";
};

zone "0.in-addr.arpa" {
	type master;
	file "/etc/bind/db.0";
};

zone "255.in-addr.arpa" {
	type master;
	file "/etc/bind/db.255";
};

// zone "com" { type delegation-only; };
// zone "net" { type delegation-only; };

// From the release notes:
//  Because many of our users are uncomfortable receiving undelegated answers
//  from root or top level domains, other than a few for whom that behaviour
//  has been trusted and expected for quite some length of time, we have now
//  introduced the "root-delegations-only" feature which applies delegation-only
//  logic to all top level domains, and to the root domain.  An exception list
//  should be specified, including "MUSEUM" and "DE", and any other top level
//  domains from whom undelegated responses are expected and trusted.
// root-delegation-only exclude { "DE"; "MUSEUM"; };

include "/etc/bind/named.conf.local";
</programlisting>
          </para>

          <para>
          The <application>include</application> line specifies the
          filename which contains the DNS options. The
          <application>directory</application> line in the options file tells
          DNS where to look for files. All files BIND uses will be
          relative to this directory.
          </para>

          <para>
          The file named <filename>/etc/bind/db.root</filename> 
          describes the root name servers in the world. The servers
          change over time, so the
          <filename>/etc/bind/db.root</filename> file must be maintained
          now and then.
          </para>

          <para>
          The <application>zone</application> section defines a master
          server, and it is stored in a file mentioned against file tag.
          Every zone file contains 3 resource records (RRs): an SOA RR, an
          NS RR and a PTR RR. SOA is short of Start of Authority. The
          "@" is a special notation meaning the origin. NS is the Name
          Server RR. PTR is Domain Name Pointer.  To start the DNS server,
          run the following command from a terminal prompt: 
           </para>
           <para>
<screen>
<command>sudo /etc/init.d/bind9 start</command>
</screen>
           </para>
          <para>You can refer to the
          documentation mentioned in the references section for details.
          </para>
      </sect1>
      <sect1 id="dns-references" status="complete">
        <title>References</title>
          <para>
            <ulink url="http://www.tldp.org/HOWTO/DNS-HOWTO.html">DNS HOWTO</ulink>
          </para>
      </sect1>
    </chapter>

