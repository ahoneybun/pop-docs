<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" 
	"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY % globalent SYSTEM "../../../libs/global.ent">
%globalent;
<!ENTITY % cdo-C SYSTEM "../../../libs/cdo-C.ent">
%cdo-C;
<!ENTITY % gnome-menus-C SYSTEM "../../../ubuntu/libs/gnome-menus-C.ent">
%gnome-menus-C;
<!ENTITY % xinclude SYSTEM "../../../libs/xinclude.mod">
%xinclude;
<!ENTITY language "&EnglishAmerican;">
<!ENTITY ubuntu '<phrase>Ubuntu</phrase>'>
]>
<chapter id="package-management" status="complete">
	<title>包管理</title>
        <para>Ubuntu 提供一套全面的包管理系统用于软件的安装、升级、配置和卸载。除了让您 Ubuntu 计算机可以访问组织好的超过 17,000 个软件包的软件库之外，包管理工具还可以解决依赖关系并提供软件更新检查。</para>
        <para>一些工具可以和 Ubuntu 包管理系统进行交互，从便于系统管理员做自动化处理的简单命令行工具到便于 Ubuntu 新手使用的简单图形界面。</para>
  <sect1 id="package-management-introduction" status="complete">
	<title>介绍</title>
        <para>Ubuntu　的包管理系统是从　Debian GNU/Linux 发行版中洐生出来的。包文件包括在您 Ubuntu 系统中实现特定功能或软件所必需的文件、元数据和指令。</para>
        <para>Debian 包文件一般用 '.deb' 作后缀，而且位于建立在不同介质上由包组成的 <emphasis role="italics">软件库</emphasis> 中，这些介质包括 CD-ROM 光盘和网站。包通常是预编译的二进制形式，因此安装速度快而且软件也无需编译。</para>
        <para>许多复杂的包使用 <emphasis role="italics">依赖包</emphasis> 这一概念，依赖包是主包为实现完整功能而要求的附加包。例如，语音合成包 <application>Festival</application> 依赖 <application>festvox-kalpc16k</application> 包，该依赖包提供被应用程序使用的众多声音之一。为了能使 <application>Festival</application> 正常运行，所有依赖包都必须与 Festival 主包同时安装。Ubuntu 软件管理工具将会自动完成这一切。</para>
  </sect1>
  <sect1 id="apt-get" status="complete">
	<title>Apt-Get</title>
        <para><application>apt-get</application> 命令是一个强大的命令行工具，用于同 Ubuntu 的 <emphasis>Advanced Packaging Tool</emphasis> (APT) 一起执行诸如安装新软件包、升级已有软件包、更新包列表索引，甚至是升级整个 Ubuntu 系统等功能。</para>
        <para>作为一个简单的命令行工具，<application>apt-get</application> 对于服务器管理员来说比 Ubuntu 中的其他软件包管理工具有着相当多的优点。这些优点包括便于在简单终端连接 (SSH) 中使用，同时能够用于系统管理脚本中，以便能被<application>cron</application> 动作计划工具自动运行。</para>
        <para><application>apt-get</application> 工具的一些常见用法示例：</para>
		<para>For further information about the use of <application>APT</application>, read the comprehensive <ulink url="&debian-apt;">Debian APT User Manual</ulink> or type: <screen>apt-get help</screen></para>
  </sect1>

  <sect1 id="aptitude" status="complete">
	<title>Aptitude</title>
        <para><application>Aptitude</application> 是一个菜单驱动，基于文本的 <emphasis>Advanced Packaging Tool</emphasis> (APT) 系统前端。包管理的许多常用功能，如安装，卸载和升级，可以在<application>Aptitude</application> 中单键执行命令，它通常是小写字母。</para>
        <para><application>Aptitude</application> 最适用于非图形的终端环境，确保命令关键字的适当功能。您可以作为一个普遍用户在终端提示符后用以下命令开始运行 <application>Aptitude</application>：<screen>
<command>sudo aptitude</command>
</screen></para>
        <para>当 <application>Aptitude</application> 开始之后，你将看在屏幕顶部的一个菜单条，其下有两个窗，顶窗包含包的类别，如 <emphasis role="italics">新软件包</emphasis> 和 <emphasis role="italics"> 未安装软件包 </emphasis>。底窗包含包和包类别的相关信息。</para>
        <para>使用 <application>Aptitude</application> 作包管理相对直观，用户界面便于执行常用任务。下面是在 <application>Aptitude</application> 中进行包管理时常见用法如下：</para>
        <itemizedlist>
               <listitem>
                <para><emphasis role="bold">安装软件包</emphasis>：要安装包，通过未安装软件包包类别找到该软件包，如通过键盘箭头键和 <keycap>ENTER</keycap> 键定位并高亮你想安装的软件包。在高亮你要安装的软件包之后，将其标示为安装。现在按 <keycap>g</keycap> 键显示软件包的操作提示。再按 <keycap>g</keycap> 键，您将被提示要成为 root 用户以完成安装。按 <keycap>ENTER</keycap> 键将显示 Password: 提示。输入您的用户密码成为 root 用户。最后，再一次按 <keycap>g</keycap> 键，您将被提示下载软件包。在<emphasis role="italics">Continue</emphasis> 提示上按 <keycap>ENTER</keycap> 键，开始下载和安装软件包。</para>
               </listitem>
               <listitem>
                <para><emphasis role="bold">卸载软件包</emphasis>：要卸载软件包，通过已安装软件包包类别找到该软件包，如通过键盘箭头键和 <keycap>ENTER</keycap> 键定位并高亮你想卸载的软件包。在高亮你要卸载的软件包之后，按 <keycap>-</keycap> 键，文件包条目将变成 <emphasis role="italics">pink</emphasis>，标示其为卸载。现在按 <keycap>g</keycap> 键显示软件包的操作提示。再按 <keycap>g</keycap> 键，您将被提示要成为 root 用户以完成卸载。按 <keycap>ENTER</keycap> 键将显示 Password: 提示。输入您的用户密码成为 root 用户。最后，再一次按 <keycap>g</keycap> 键，您将被提示下载软件包。在<emphasis role="italics">Continue</emphasis> 提示上按 <keycap>ENTER</keycap> 键，开始卸载软件包。</para>
               </listitem>
               <listitem>
                <para><emphasis role="bold">更新软件包索引</emphasis>：要更新软件包索引，简单按 <keycap>u</keycap> 您将被提示要成为 root 用户以完成更新。按 <keycap>ENTER</keycap> 键将显示 Password: 提示，输入您的用户密码成为 root 用户。开始更新软件包索引，当出现下载对话框时在 OK 提示上按 <keycap>ENTER</keycap> 键以结束更新过程。</para>
               </listitem>
               <listitem>
                <para><emphasis role="bold">升级软件包</emphasis>：要升级软件包，如上所述更新软件包索引，然后按<keycap>U</keycap> 键标示所有能升级的软件包。现在按 <keycap>g</keycap> 键显示软件包的操作提示。再按 <keycap>g</keycap> 键，您将被提示要成为 root 用户以完成安装。按 <keycap>ENTER</keycap> 键将显示 Password: 提示。输入您的用户密码成为 root 用户。最后，再一次按 <keycap>g</keycap> 键，您将被提示下载软件包。在<emphasis role="italics">Continue</emphasis> 提示上按 <keycap>ENTER</keycap> 键，开始升级软件包。</para>
               </listitem>
        </itemizedlist>
        <para>当实际查看软件时列出软件包当前状态，在顶窗软件包列表中显示信息的第一列使用下列关键字来描述软件包状态：<itemizedlist>
        <listitem>
        <para><emphasis role="bold">i</emphasis>: 安装软件包</para>
        </listitem>
        <listitem>
        <para><emphasis role="bold">c</emphasis>: 软件包没有安装，但在系统中有软件包的残留配置</para>
        </listitem><listitem>
        <para><emphasis role="bold">p</emphasis>: 从系统彻底删除</para>
        </listitem><listitem>
        <para><emphasis role="bold">v</emphasis>: 虚拟软件包</para>
        </listitem><listitem>
        <para><emphasis role="bold">B</emphasis>: 已损坏的软件包</para>
        </listitem><listitem>
        <para><emphasis role="bold">u</emphasis>: 解压文件，但尚未配置软件包</para>
        </listitem><listitem>
        <para><emphasis role="bold">C</emphasis>: 半配置 - 配置失败需要修复</para>
        </listitem><listitem>
        <para><emphasis role="bold">H</emphasis>: 半安装 - 卸载失败需要修复</para>
        </listitem>
        </itemizedlist></para>
        <para>要退出 Aptitude，只需简单按 <keycap>q</keycap> 键并确认您想退出即可。在 Aptitude 菜单中按 <keycap>F10</keycap>  键可以列出其他许多功能。</para>
  </sect1>
	<sect1 id="configuration" status="complete">
		<title>配置</title>
          <para><emphasis>Advanced Packaging Tool</emphasis> (APT) 系统软件库的配置被保存在 /etc/apt/sources.list 文件中。这儿有个该文件的示例，</para>
          <para><ulink url="../sample/sources.list">这里</ulink> 是一个典型的 <filename>/etc/apt/sources.list</filename> 文件范例。</para>
          <para>您可以编辑该文件来使软件库生效或失效。举个例子，要不想无论何时在发生文件包操作都会引起要求插入 Ubuntu CD-ROM ，只需要简单地将在文件顶部的 CD-ROM 相应行注释掉即可：</para>
          <para>
<screen>
# no more prompting for CD-ROM please
# deb cdrom:[Ubuntu 6.06 _Dapper Drake_ - Release i386 (20060329.1)]/ dapper main restricted
</screen>
          </para>
          
    </sect1>
	<sect1 id="extra-repositories" status="complete">
		<title>其他软件库</title>
          <para>除了可以使用官方支持的 Ubuntu 软件包库之外，还存在拥有几千个潜在软件包的由其它社区维护的软件库。这些软件库中最流行的两个是 <emphasis>Universe</emphasis> 和 <emphasis>Multiverse</emphasis> 软件库。这些软件库并不被 Ubuntu 官方支持，这就是它们为什么在缺省时不能的原因，但它们提供的包通常是可以在您的 Ubuntu 计算机上安全使用的。</para>
		  <note><para>在 Multiverse 软件库中的包通常有许可证的问题，这使得它们不能和自由操作系统一起分发，它们在您所在的地区可能是违法的。</para></note>
          <warning>
          <para>建议不要在 <emphasis>Universe</emphasis> 或 <emphasis>Multiverse</emphasis> 软件库中包含官方支持的软件包。尤其是在升级这些包时可能会不安全。</para>
          </warning>
          <para>许多其他软件包源也是可用的，有时甚至只提供一个软件包，这种情况主要发生在由单个应用程序的开发人员所提供软件包源上。然而当您在使用非标准软件包源时您应该非常小心谨慎，在执行任何安装之前仔细考查源和软件包，因为有些软件包源和其中的软件包可能会使您的系统在某些方面运行不稳定或不正常。</para>
          <para>要使 <emphasis>Universe</emphasis> 和 <emphasis>Multiverse</emphasis> 库可用，编辑<filename>/etc/apt/sources.list</filename> 文件并将去掉相关行的注释：</para>
          <para>
<screen>
# We want Multiverse and Universe repositories, please

deb http://archive.ubuntu.com/ubuntu dapper universe multiverse
deb-src http://archive.ubuntu.com/ubuntu dapper universe multiverse
</screen>
          </para>
          <sect2 id="extra-repositories-references" status="complete">
                <title>引用</title>
                <para>
                <ulink url="https://wiki.ubuntu.com/AddingRepositoriesHowto">如何添加软件库(Ubuntu Wiki)</ulink>
                </para>
          </sect2>
    </sect1>
	</chapter>

