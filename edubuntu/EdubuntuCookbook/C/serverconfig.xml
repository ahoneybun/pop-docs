<chapter id="chap09-serverconfig" status="draft">
	<title>Server Configuration</title>
   <para>...</para>
	<sect1 id="chap09-sect01" status="draft">
		<title>Configuring a Wikipedia server</title>
		<para>...</para>
		<sect2 id="chap09-sect01.01" status="draft">
			<title>Software used by Wikipedia</title>
			<para>...</para>
		</sect2>
		<sect2 id="chap09-sect01.02" status="draft">
			<title>Wikipedia as a clasroom resource</title>
			<para>...</para>
		</sect2>
	</sect1>
	<sect1 id="chap09-sect02" status="draft">
		<title>Dynamic Host Configuration Protocol</title>
		<para>Every computer on a local area network (<acronym>LAN</acronym>) needs to have a unique IP address (see <xref linkend="chap08-sect04" />) so that it may send and receive data. The Dynamic Host Configuration Protocol (<acronym>DHCP</acronym>) is a networking protocol that allocates IP addresses dynamically to computers on a <acronym>LAN</acronym>. Without it, an administrator needs to give each client computer a static IP address manually. This may seem simple enough to begin with, but given time, it slowly turns into a nightmare: computers are added, removed or moved about, and the number assignments eventually become arbitrary and troublesome to keep track of. On a network with manually assigned addresses, it's also awkward to connect transient devices such as laptop computers that are also used on many other networks. You have to talk to the system administrator to find out the network configuration, and then check the network to find a free address. With <acronym>DHCP</acronym>, it&apos;s easy: just plug in an ethernet cable for the new device, and it will immediately request an IP address from the classroom server, which will assign an unused number to it.</para>
		<para>In Edubuntu, the classroom server is configured as a <acronym>DHCP</acronym> server. A system administrator assigns a range of IP addresses to the server. Each client computer on the <acronym>LAN</acronym> has its <acronym>TCP/IP</acronym> software configured to request an IP address automatically from the <acronym>DHCP</acronym> server when that client computer starts up. The request-and-grant process uses a lease concept with a controllable time period. This eases the network installation procedure on the client computer side considerably.</para>
		<para>In addition to the IP address, a <acronym>DHCP</acronym> server can set other configuration information, such as the address of the <acronym>DNS</acronym> server, the <acronym>DNS</acronym> domain of the client, and the gateway IP address, so that the client computer can be fully functional.</para>
		<para>Before we continue, let us learn the concepts that were introduced. First, the <acronym>DNS</acronym> domain: all Linux computers are given a hostname upon installation of the <acronym>OS</acronym>, which is used in system messages and configuration. When the computer joins a network, its hostname and the domain of the network together combine to form the Fully Qualified Domain Name (<acronym>FQDN</acronym>) of the computer. In the case of Edubuntu, the <acronym>FQDN</acronym> of each workstation will be something like <literal>client1.myschool.edubuntu.org</literal>.</para>
		<para>Secondly, the gateway IP address. In <xref linkend="chap08-sect03" /> we learned that the Internet is a <emphasis>network of networks</emphasis>. For data packets from a computer on one network to reach a server on another network, there needs to be a gateway that is connected to both networks at once. Usually, the gateway computer will have a network card for every network to which it is connected.</para>
		<para>By default, the <acronym>LTSP</acronym> server uses its first network card ( <literal>eth0</literal>, numbered from 0 like most things in the computer world) for the classroom <acronym>LAN</acronym>. It runs <acronym>DHCP</acronym> on this card, and automatically gives out IP numbers upon request. It then accepts <acronym>BootP</acronym> (Boot Protocol) and <acronym>PXE</acronym> (Pre-boot eXecution Environment) boot requests, and passes on the Linux kernel to the client using <acronym>TFTP</acronym> for the transfer. Once the client has received the kernel, it boots into Linux. The default <literal>dhcpd.conf</literal> file will support over 200 clients. The <acronym>LTSP</acronym> server will not answer <acronym>DHCP</acronym> requests over <literal>eth1</literal> (with the default settings.)</para>
		<!-- <sect2 id="chap09-sect02.01">
			<title>Files</title>
			<para>...</para>
		</sect2> -->
	</sect1>
	<sect1 id="chap09-sect03" status="draft">
		<title>Network configuration</title>
		<para>The first network card, <literal>eth0</literal>, is the interface on the thin-client side of your <acronym>LTSP</acronym> server. This network card connects to your terminal hub. The <literal>192.168.0.x</literal> address range is designated as a <quote>private</quote> IP range for internal networks. It is not routed on the Internet. IP traffic from your clients are routed to the Internet through <literal>eth1</literal>.</para>
		<para>The classroom server has the last available address in this range, namely <literal>192.168.0.254</literal> (<literal>192.168.0.255</literal> is the broadcast address: packets sent to this address reach all the computers on the network). The first client will be assigned an IP number of <literal>192.168.0.253</literal>.
		<footnote>
        <para>For more information, see 
        <ulink url="http://www.k12ltsp.org/install.html">
        http://www.k12ltsp.org/install.html</ulink></para>
      </footnote></para>
	</sect1>
	<sect1 id="chap09-sect04" status="draft">
		<title>Network Filesystem</title>
		<para>Edubuntu uses <acronym>NFS</acronym>, the Network Filesystem, to make the home directories of lab users appear to be local to the client workstations, even though they really reside on the classroom server. The <acronym>NFS</acronym> configuration is specified in the file <literal>/etc/exports</literal> on the classroom server.</para>
	</sect1>
	<sect1 id="chap09-sect05" status="draft">
		<title>LTSP configuration</title>
		<para><emphasis>XXX: Check configuration of LTSP</emphasis></para>
	</sect1>
	<sect1 id="chap09-sect06" status="draft">
		<title>tftpboot</title>
		<para>Upon power-up, the BIOS of each client workstation contacts the classroom server, and retrieves the Linux kernel from it via the TFTP protocol. <emphasis>XXX: need more details</emphasis>.</para>
	</sect1>
	<sect1 id="chap09-sect07" status="draft">
		<title>Users and groups</title>
		<para>All the users of the Edubuntu lab will have accounts on the classroom server.</para>
		<para><emphasis>XXX: who adds them? Super User? Using some Gnome Users and Groups Utility? Add instructions</emphasis></para>
		<sect2 id="chap09-sect07.01" status="draft">
			<title>Permissions</title>
			<para>...</para>
		</sect2>
		<sect2 id="chap09-sect07.02" status="draft">
			<title>Retiring users</title>
			<para><emphasis>XXX: what happens when a user is retired? Is the password just reset, or is the whole home directory and all email deleted?</emphasis></para>
		</sect2>
	</sect1>
	<sect1 id="chap09-sect08" status="draft">
		<title>Printing</title>
		<para><emphasis>XXX: Add printer configuration via CUPS, etc.</emphasis></para>
	</sect1>
	<sect1 id="chap-09-sect09" status="draft">
		<title>Developing a backup procedure</title>
		<para>The importance of backing up a system can never be stressed enough. You never know when the power may cut out or the hard drive may crash. Even though you can restore the operating system from the distribution CD-ROM, there are other files that you need to consider. What about the configuration changes that you made? There are also files created by users, what about those</para>
		<para>Follow these steps to create a backup plan:</para>
		<orderedlist>
			<listitem>
				<para>Make a list of the files and directories that you need backups of. You'll always want to backup system configuration files in the <filename>/etc</filename> directory, other configuration files may be found in <filename>/usr/lib</filename>. In addition, you may want to backup user files in the <filename>/home</filename> directory as well as the superuser (<literal>root</literal>) files in <filename>/root</filename>.</para>
			</listitem>
			<listitem>
				<para>Find a few tools to use when backing up and archiving files and directories. Several tools are available that will archive a group of files, and there are tools that will compress files and archives.</para>
			</listitem>
			<listitem>
				<para>Decide how often the the system and individual files need to be backed up. How often do your files change? If files change frequently, the your backup frequency should match the change frequency. So, you may need to perform a backup every day. If you only make one or two configuration changes on occasion, you can easily backup the configuration files only when the changes is made.</para>
			</listitem>
			<listitem>
				<para>Select a storage medium that will store the backup file. If you have a few files to backup, you could just store them on a floppy disk. If you have more files, or larger files, you can consider using a zip drive or a CD-RW drive.</para>
			</listitem>
			<listitem>
				<para>Store the files in a safe place. The safest place to store the backup media is at a location different from where the the computer is located. To be really safe, this location needs to be protected from fire and other hazards. You may also want to keep a copy of the backup files close by so that you can quickly restore lost files.</para>
			</listitem>
		</orderedlist>
	 	<tip>
	 		<para>Always make a copy of configuration files before you make any configuration changes. That way, should your new settings not work, you can restore the old configuration files.</para>
	 	</tip>	
	</sect1>
</chapter>