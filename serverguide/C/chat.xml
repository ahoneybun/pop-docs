<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" 
	"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY % globalent SYSTEM "../../libs/global.ent">
%globalent;
<!ENTITY % gnome-menus-C SYSTEM "../../libs/gnome-menus-C.ent">
%gnome-menus-C;
<!ENTITY % xinclude SYSTEM "../../libs/xinclude.mod">
%xinclude;
<!ENTITY language "&EnglishAmerican;">
]>
<chapter id="chat-servers" status="review">
  <title>Chat Applications</title>


  <sect1 id="chat-overview">
    <title>Overview</title>
  
    <para>
    In this section, we will discuss how to install and configure
    a IRC server, <application>ircd-irc2</application>. We will also
    discuss how to install and configure Jabber, an instance messaging
    server.
    </para> 

  </sect1>
  <sect1 id="irc-server" status="review">
    <title>IRC Server</title>

    <para>
    The Ubuntu repository has many Internet Relay Chat servers. This
    section explains how to install and configure the original IRC
    server <application>ircd-irc2</application>.
    </para>

    <sect2 id="irc-installation" status="review">
      <title>Installation</title>

      <para>
      To install <application>ircd-irc2</application>, run the following
      command in the command prompt:
      </para>

<screen>
<command>sudo apt-get install ircd-irc2</command>
</screen>

       <para>
       The configuration files are stored in
       <filename>/etc/ircd</filename> directory. The documents are
       available in <filename>/usr/share/doc/ircd-irc2</filename>
       directory. 
       </para> 

     </sect2>
    <sect2 id="irc-configuration" status="review">
      <title>Configuration</title>

      <para>
      The IRC settings can be done in the configuration file
      <filename>/etc/ircd/ircd.conf</filename>. You can set the IRC host
      name in this file by editing the following line:
      </para>
<programlisting>
M:irc.localhost::Debian ircd default configuration::000A
</programlisting>

      <para>
      Please make sure you add DNS aliases for the IRC host name. For
      instance, if you set irc.livecipher.com as IRC host name, please
      make sure irc.livecipher.com is resolvable in your Domain Name
      Server. The IRC host name should not be same as the host name.
      </para>

      <para>
      The IRC admin details can be configured by editting the following
      line:
      </para>

<programlisting>
A:Organization, IRC dept.:Daemon &lt;ircd@example.irc.org&gt;:Client Server::IRCnet:
</programlisting>

      <para>
      You should add specific lines to configure the list of IRC ports to
      listen on, to configure Operator credentials, to configure client
      authentication, etc. For details, please refer to the example
      configuration file
      <filename>/usr/share/doc/ircd-irc2/ircd.conf.example.gz</filename>.
      </para>

      <para>
      The IRC banner to be displayed in the IRC client, when the user
      connects to the server can be set in
      <filename>/etc/ircd/ircd.motd</filename> file.
      </para>
      <para>
      After making necessary changes to the configuration file, you can
      restart the IRC server using following command:
      </para>
<programlisting>
sudo /etc/init.d/ircd-irc2 restart
</programlisting>

  </sect2>
  <sect2 id="irc-references" status="review">
    <title>References</title>

    <para>
    You may also be interested to take a look at other IRC servers
    available in Ubuntu Repository. It includes,
    <application>ircd-ircu</application> and
    <application>ircd-hybrid</application>.
    </para>
    <itemizedlist>
      <listitem>
        <para>
        Refer to <ulink
        url="http://www.irc.org/tech_docs/ircnet/faq.html">IRCD
        FAQ</ulink> for more details about the IRC Server.
        </para>
      </listitem>
      <listitem>
        <para>
        Also, the <ulink url="https://help.ubuntu.com/community/ircd">Ubuntu Wiki IRCD</ulink> page has more information.
        </para>
      </listitem>
    </itemizedlist>
  </sect2>
  </sect1>
  <sect1 id="jabberd2-server" status="review">
    <title>Jabber Instant Messaging Server</title>

    <para>
    <emphasis>Jabber</emphasis> a popular instant message protocol is based on XMPP, an open standard for instant messaging, and
    used by many popular applications.  This section covers setting up a <emphasis>Jabberd 2</emphasis> server on a local LAN.  
    This configuration can also be adapted to providing messaging services to users over the Internet.
    </para>

    <sect2 id="jabberd2-installation" status="review">
      <title>Installation</title>

      <para>
      To install <application>jabberd2</application>, in a terminal enter:
      </para>

<screen>
<command>sudo apt-get install jabberd2</command>
</screen>

  </sect2>
  <sect2 id="jabberd2-configuration" status="review">
    <title>Configuration</title>

    <para>
    A couple of XML configuration files will be used to configure <application>jabberd2</application> for 
    <emphasis>Berkely DB</emphasis> user authentication.  This is a very simple form of authentication.  However,
    <application>jabberd2</application> can be configured to use LDAP, MySQL, Postgresql, etc for 
    for user authentication.
    </para>
    
    <para>
    First, edit <filename>/etc/jabberd2/sm.xml</filename> changing:
    </para>

<programlisting>
  &lt;id&gt;jabber.example.com&lt;/id&gt;
</programlisting>

    <note>
      <para>
      Replace <emphasis>jabber.example.com</emphasis> with the hostname, or other id, of your server.  
      </para>
    </note>

    <para>
    Now in the &lt;storage&gt; section change the &lt;driver&gt; to:
    </para>

<programlisting>
   &lt;driver&gt;db&lt;/driver&gt;
</programlisting>

    <para>
    Next, edit <filename>/etc/jabberd2/c2s.xml</filename> in the <emphasis>&lt;local&gt;</emphasis> section change: 
    </para>

<programlisting>
    &lt;id&gt;jabber.example.com&lt;/id&gt;
</programlisting>

    <para>
    And in the &lt;authreg&gt; section adjust the &lt;module&gt; section to:
    </para>

<programlisting>
    &lt;module&gt;db&lt;/module&gt;
</programlisting>

    <para>
    Finally, restart <application>jabberd2</application> to enable the new settings:
    </para>

<screen>
<command>sudo /etc/init.d/jabberd2 restart</command>
</screen>

  <para>
  You should now be able to connect to the server using a Jabber client like <application>Pidgin</application> for example.
  </para>

  <note>
    <para>
    The advantage of using Berkeley DB for user data is that after being configured no additional maintenance is required.  If you need
    more control over user accounts and credentials another authentication method is recommended.
    </para>
  </note>

  </sect2>
  <sect2 id="jabberd2-references" status="review">
    <title>References</title>

    <itemizedlist>
      <listitem>
        <para>
        The <ulink url="http://codex.xiaoka.com/wiki/jabberd2:start">Jabberd2 Web Site</ulink> contains more details on configuring 
        <application>Jabberd2</application>.
        </para>
      </listitem>
      <listitem>
        <para>
        For more authentication options see the <ulink url="http://jabberd2.xiaoka.com/wiki/InstallGuide">Jabberd2 Install Guide</ulink>.
        </para>
      </listitem>
      <listitem>
        <para>
        Also, the <ulink url="https://help.ubuntu.com/community/SettingUpJabberServer">Setting Up Jabber Server Ubuntu Wiki</ulink> page 
        has more information.
        </para>
      </listitem>
    </itemizedlist>
  </sect2>
  </sect1>
</chapter>
